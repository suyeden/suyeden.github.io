<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
<head>
<!-- 2021-03-24 水 00:03 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Git 小ネタ集</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2020 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Git 小ネタ集</h1>
<div id="outline-container-org51298cb" class="outline-2">
<h2 id="org51298cb"></h2>
<div class="outline-text-2" id="text-org51298cb">
<hr />
</div>
<div id="outline-container-orge9ef381" class="outline-3">
<h3 id="orge9ef381"><a href="index.html">home</a></h3>
<div class="outline-text-3" id="text-orge9ef381">
<hr />
</div>
</div>
</div>

<div id="outline-container-org162a02e" class="outline-2">
<h2 id="org162a02e">PowerShell で git の補完ができるようにする</h2>
<div class="outline-text-2" id="text-org162a02e">
<p>
Posh-Git というモジュールを PowerShell に追加する。<br />
Posh-Git は GitHub で公開されているので、 Git を使って自分の PC に GitHub 上の Posh-Git の公開リポジトリをクローンし、手に入れたファイル一式の中の install.ps1 を実行すればよい。<br />
</p>
</div>
</div>

<div id="outline-container-org1141233" class="outline-2">
<h2 id="org1141233">プルリクエスト</h2>
<div class="outline-text-2" id="text-org1141233">
<ol class="org-ol">
<li>マスターブランチ以外のブランチでpushします。<br /></li>
<li>GitHubにて「Compare ＆ pull request」ボタンが表示されるのでこれをクリックし、プルリクエスト作成ページへ移動します。<br /></li>
<li>プルリクエストのタイトルを入力します。<br />
「close #issueの番号」を入れると、該当するissueをマージされたタイミングで自動でクローズしてくれます。<br />
複数のIssueをクローズしたい場合は、「close #issueの番号 close #issueの番号」とします。<br /></li>
<li>変更点、関連するイシューや資料へのリンクなど、レビュー担当者(プルリクエストを確認する人)へ伝えておきたいことをここに書きます。<br />
Markdown形式で記述すれば、文章を構造化することができます。<br /></li>
<li>「Create pull request」ボタンを押してプルリクエストを作成します。<br /></li>
</ol>
</div>

<div id="outline-container-org8790ffd" class="outline-3">
<h3 id="org8790ffd">プルリクエストのマージ</h3>
<div class="outline-text-3" id="text-org8790ffd">
<p>
筆者が所属するチームの場合、プルリクエストは以下のフローで行うことが多いです。<br />
</p>
<ol class="org-ol">
<li>実装者（ファイルへの変更を行った人）がプルリクエストを作成する<br /></li>
<li>レビュー担当者（実装者以外）が変更内容をレビューする<br /></li>
<li>必要に応じて実装者は修正を行う<br /></li>
<li>マージできる状態になったら、実装者が「Merge pull request」ボタンを押してマージを行う<br /></li>
</ol>

<p>
1人チームであれば、問題なければ自分でマージしてしまいましょう。「Merge pull request」ボタンをクリックしてください。<br />
マージ確認状態になります。マージして問題なければ「Confirm merge」をクリックします。<br />
マージが完了します。<br />
「Delete branch」をクリックすると、プルリクエストに使用したブランチを削除できます。<br />
作業ブランチを自動で削除するようにするには設定が必要です。詳しくは <a href="git_kojin_kaihatsu.html">Git による個人開発フロー</a> の 6 を参照。<br />
</p>
</div>
</div>
</div>

<div id="outline-container-orgec7f2c5" class="outline-2">
<h2 id="orgec7f2c5">GitHubのissueとcommitを紐付ける</h2>
<div class="outline-text-2" id="text-orgec7f2c5">
<p>
commitメッセージに「#issue番号」とすることで自動的にそのissueへのリンクを貼ってくれる。<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git commit -m "README.md #2 修正 "
</pre>
</div>
<p>
GitHubリポジトリtopやcommitのタブにてみると「#issue番号」のところにリンクが付与されていることが確認できる。<br />
</p>
</div>
</div>

<div id="outline-container-org6d11d98" class="outline-2">
<h2 id="org6d11d98">GitHub Issues</h2>
<div class="outline-text-2" id="text-org6d11d98">
<p>
リポジトリのトップページから <code>Issues</code> タブを選択し、 <code>New issue</code> をクリックしましょう。<br />
Issueにはタイトルとコメントを入力します。<br />
タイトルは課題の内容(〜の機能が欲しい、〜という問題がある)や達成したいタスクを端的に表現して、コメントの部分で仕様やバグの再現手順などを詳細に書いていくといいでしょう<br />
</p>
</div>
<div id="outline-container-org5bf97a8" class="outline-3">
<h3 id="org5bf97a8">他にも設定できる項目</h3>
<div class="outline-text-3" id="text-org5bf97a8">
<ul class="org-ul">
<li>担当者を明確にする「Assignee」機能<br />
Issueに担当者を割り当てる機能です。<br />
Issue画面のサイドバーにある <code>Assignee</code> という文字をクリックすると、ユーザーの選択画面が出てきます。<br /></li>
<li>スケジュールを管理する「Milestone」機能<br />
GitHubでは、Issueごとに期日を切るのではなく、マイルストンを先に置いて、それにIssueを紐付けます。<br />
まずはIssueの一覧画面からマイルストンの一覧画面に遷移します。そこから <code>New milestone</code> で新しいマイルストンを作成します。<br />
マイルストンの設定画面ではタイトル、概要、期日を入力します。<br />
タイトルの付け方はチームごとに分かりやすいように定めると良いですね。<br />
<code>Create milestone</code> をクリックすると作成完了です。<br /></li>
<li>増えたIssueを整理する「Label」機能<br />
Issueにラベルを付けて分類できます。<br />
Issues一覧からラベル一覧を確認できますが、デフォルトでもbugやduplicate(重複したIssueなど、結構な数のラベルが揃っています。<br />
ラベルは1つのIssueに複数つけることができます。<br />
任意の色で表示できるので、一覧画面での視認性が増しますね。もちろんラベルでフィルタリングすることも出来ます。<br /></li>
<li>その他にファイルを添付することもできます。<br /></li>
</ul>
<p>
どのツールを使う時も同じですが、まずはゆるやかに始めてみて、徐々にチームに合った形に運用方法を固めていくといいでしょう。<br />
</p>
</div>
</div>
<div id="outline-container-org47130d8" class="outline-3">
<h3 id="org47130d8">Issue の削除</h3>
<div class="outline-text-3" id="text-org47130d8">
<p>
リポジトリの管理者権限がある人は、リポジトリから Issue を完全に削除できます。<br />
削除できる Issue は自分のユーザアカウントが所有するリポジトリのものだけです。<br />
別のユーザアカウントが所有するリポジトリの Issue は、仮にあなたがコラボレーターであったとしても、削除することはできません。<br />
Issue を削除してもコラボレータには通知されません。<br />
削除された Issue の URL にコラボレータがアクセスすると、その Issue が削除された旨のメッセージが表示されます。<br />
</p>
<ol class="org-ol">
<li>削除対象の Issue に移動します。<br /></li>
<li>右側のバーの <code>Notifications</code> の下で、 <code>Delete issue</code> をクリックします。<br /></li>
<li>削除を確定するには、 <code>Delete this issue</code> をクリックします。<br /></li>
</ol>
</div>
</div>
</div>

<div id="outline-container-org9ea2f10" class="outline-2">
<h2 id="org9ea2f10">ライセンスを設定する</h2>
<div class="outline-text-2" id="text-org9ea2f10">
<p>
実は、GitHubにはライセンスを設定する機能がはじめから付いています。<br />
ライセンス詳細については <a href="open_source_license.html">オープンソースライセンス</a><br />
リポジトリを作成するときに、「Add a license: None」というセレクトボックスがあります。<br />
ここから、設定したいライセンスを選んでリポジトリを作成するだけで、LICENSEというファイルが出来ます。<br />
LICENSEファイルには自動でCopyrightの日付と所有者が記載されるので、あとは必要であればorganizationを埋めるだけです。<br />
</p>

<p>
ライセンスを明記しない場合は、どのような扱いになるのでしょうか。<br />
ライセンスが明記されていないソースコードに対しては、デフォルトの著作権法が適用されます。<br />
つまり、ソフトウェアの複製、改変、（複製物または二次的著作物の）再頒布が認められません。（No License）<br />
（ただし、forkした場合は上記を認める記述がGitHubの利用規約中にあり、GitHubの利用者はそれに同意したことになります）<br />
改変せずにそのまま使用することだけを認めたいなら、ライセンスは明記しなくてもOKということです。<br />
</p>
</div>

<div id="outline-container-org7cc0a94" class="outline-3">
<h3 id="org7cc0a94">GitHubで後からライセンスを指定する方法</h3>
<div class="outline-text-3" id="text-org7cc0a94">
<ol class="org-ol">
<li>GitHubの当該リポジトリを表示し、リポジトリのトップディレクトリで <code>Create New File</code><br /></li>
<li>ファイル名を指定できるので、そこに <code>LICENSE</code> と入力<br />
すると右側に <code>Choose a license template</code> というライセンス選択のプルダウンが現れる<br /></li>
<li>ページの左側 <code>Add a license to your project</code> の下で、利用可能なライセンスをレビューして、リストからライセンスを選択<br />
リポジトリに合ったライセンスを選ぶと、本文にライセンス文面が適用される（テンプレートでファイルを埋めてくれる）<br />
eg.<br />
Redmineのプラグインでは、そもそもRedmineがGPLv2なことと、プラグイン自体Redmineがないと動かないので、GPLv2に揃える<br /></li>
<li><code>Review and submit</code> をクリックします。<br /></li>
<li>ページの下部で、ファイルに対して行った変更を説明する短く分かりやすいコミットメッセージを入力<br />
コミットメッセージでは、複数の作者にコミットを関連づけることができる<br /></li>
<li>コミットメッセージフィールドの下で、コミットを追加を現在のブランチか新しいブランチから選択<br /></li>
<li><code>Commit new file</code> をクリック<br /></li>
<li>必要に応じて <code>git pull</code> を行う<br /></li>
</ol>
</div>
</div>
</div>

<div id="outline-container-orga9afeaf" class="outline-2">
<h2 id="orga9afeaf">Githubにバッチを適用する</h2>
<div class="outline-text-2" id="text-orga9afeaf">
<p>
<a href="https://shields.io">https://shields.io</a> を使う。<br />
表示されているURLにリポジトリ情報などを入れるとsvgが返ってくるのでそれをつかうだけ。<br />
<code>Copy Badge URL</code> 横の下矢印を押して、 <code>Copy Markdown</code> を押し、コピーされた文字列を md ファイルにペーストする。<br />
</p>
</div>
</div>

<div id="outline-container-org49ee341" class="outline-2">
<h2 id="org49ee341">git pull実行時にローカルで未コミットの変更を保持する方法</h2>
<div class="outline-text-2" id="text-org49ee341">
<p>
git pullを実行する際に、ローカルで未コミットの変更をリモートに反映させずローカルでだけ保持したい場合があります。<br />
しかし、この状態でgit pullをするとエラーとなり、プル操作が行えません。<br />
</p>

<p>
例えば、hoge.txtの変更がローカルで行われていますが、この変更はリモートには反映したくないため、未コミットとしています。<br />
</p>

<p>
以下の２通りの対処方法をご紹介します。<br />
</p>
<ul class="org-ul">
<li>リモートの変更で上書きせず、ローカルでの変更を保持したい場合<br /></li>
<li>やっぱりリモートの変更で上書きしたくなった場合<br /></li>
</ul>
</div>

<div id="outline-container-org00a20f9" class="outline-3">
<h3 id="org00a20f9">リモートの変更で上書きせず、ローカルでの変更を保持したい場合</h3>
<div class="outline-text-3" id="text-org00a20f9">
<ol class="org-ol">
<li>事前に、ローカルでだけ保持したい変更以外の変更をすべてコミットしておきます。<br />
ローカルでだけ保持したい変更をgit stashで退避させ、ローカルをクリーンな状態にします。<br /></li>
<li>この状態でgit pullをします。ローカルのhoge.txtがリモートでの変更で上書きされます。<br /></li>
<li><p>
退避させた変更をstashから戻します。このときhoge.txtは競合状態となります。<br />
</p>
<pre class="example">
$ git stash apply stash@{0}
Auto-merging hoge.txt
CONFLICT (content): Merge conflict in hoge.txt
$ git status
On branch master
Your branch is up-to-date with 'origin/master'.
 Unmerged paths:
  (use "git reset HEAD &lt;file&gt;..." to unstage)
  (use "git add &lt;file&gt;..." to mark resolution)
         both modified:   hoge.txt
 no changes added to commit (use "git add" and/or "git commit -a")
$ cat hoge.txt
&lt;&lt;&lt;&lt;&lt;&lt;&lt; Updated upstream
リモートでの変更
=======
ローカルでの変更
&gt;&gt;&gt;&gt;&gt;&gt;&gt; Stashed changes
</pre></li>
<li><p>
競合した変更のうちstashから戻した方の変更を適用します。状態としてはhoge.txtはまだ競合状態にあります。<br />
</p>
<pre class="example">
$ git checkout --theirs .
$ cat hoge.txt
ローカルでの変更
$ git status
On branch master
Your branch is up-to-date with 'origin/master'.
 Unmerged paths:
  (use "git reset HEAD &lt;file&gt;..." to unstage)
  (use "git add &lt;file&gt;..." to mark resolution)
         both modified:   hoge.txt
 no changes added to commit (use "git add" and/or "git commit -a")
</pre></li>
<li><p>
hoge.txtを一旦ステージングして競合状態を解消します。<br />
</p>
<pre class="example">
$ git add .
$ git status
On branch master
Your branch is up-to-date with 'origin/master'.
 Changes to be committed:
  (use "git reset HEAD &lt;file&gt;..." to unstage)
         modified:   hoge.txt
</pre></li>
<li><p>
hoge.txtのステージングを取り消します。これでローカルで未コミットの変更を保持したままgit pullを行うことができました。<br />
</p>
<pre class="example">
$ git reset HEAD
Unstaged changes after reset:
M       hoge.txt
$ git status
On branch master
Your branch is up-to-date with 'origin/master'.
 Changes not staged for commit:
  (use "git add &lt;file&gt;..." to update what will be committed)
  (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)
         modified:   hoge.txt
 no changes added to commit (use "git add" and/or "git commit -a")
</pre></li>
</ol>
</div>
</div>

<div id="outline-container-orgb56f804" class="outline-3">
<h3 id="orgb56f804">リモートの変更で上書きして良い場合</h3>
<div class="outline-text-3" id="text-orgb56f804">
<p>
ローカルで未コミットのまま作業してきた変更を、git pull時に「やっぱりリモートの変更で上書きしてもいいや」となった場合の対処方法です。<br />
</p>
<ol class="org-ol">
<li><p>
変更を未コミットとしているhoge.txtに対してチェックアウトを行い、ローカルでの最後のコミット内容を適用してローカルをクリーンにします。<br />
</p>
<pre class="example">
$ git checkout hoge.txt
$ git status
On branch master
Your branch is behind 'origin/master' by 1 commit, and can be fast-forwarded.
  (use "git pull" to update your local branch)

nothing to commit, working tree clean
</pre></li>
<li><p>
git pullを実行してリモートの変更で上書きします。<br />
</p>
<pre class="example">
$ git pull origin master
From https://github.com/account/test
 * branch            master     -&gt; FETCH_HEAD
Updating c79d59e..37b80c5
Fast-forward
 hoge.txt | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)
$ cat hoge.txt
リモートでの変更
</pre></li>
</ol>
</div>
</div>
</div>

<div id="outline-container-org7aa5bd1" class="outline-2">
<h2 id="org7aa5bd1">ローカルのブランチ名の変更</h2>
<div class="outline-text-2" id="text-org7aa5bd1">
<p>
<code>git branch -m &lt;古いブランチ名&gt; &lt;新しいブランチ名&gt;</code><br />
今開いているブランチをリネームする場合は、単純に新しいブランチ名を指定するだけです。<br />
<code>git branch -m &lt;新しいブランチ名&gt;</code><br />
</p>
</div>
</div>

<div id="outline-container-org10d7799" class="outline-2">
<h2 id="org10d7799">シンボリックリンクを扱えるようにする</h2>
<div class="outline-text-2" id="text-org10d7799">
<p>
[注意!] リンク先の内容まではリポジトリに格納されない! 実体はリンク先が書かれたただのファイル<br />
</p>

<p>
参照<br />
<a href="https://www.quora.com/Learning-programming-How-does-Git-handle-symbolic-links/">https://www.quora.com/Learning-programming-How-does-Git-handle-symbolic-links/</a><br />
<a href="https://qiita.com/ngyuki/items/621830bc53aaf2923f73">https://qiita.com/ngyuki/items/621830bc53aaf2923f73</a><br />
</p>

<ol class="org-ol">
<li><p>
.gitconfigの設定が足りていない<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git config --global core.symlinks true
</pre>
</div>
<p>
このコマンドを実行すると、.gitconfigに<br />
</p>
<pre class="example">
[user]
        name = ユーザ名
        email = メールアドレス
[core]
        quotepath = false
        symlinks = true
</pre>
<p>
こんな感じで追記されます。<br />
コマンドを実行しても追記されない場合は、直接編集しても問題ありません。<br />
</p></li>

<li>Windows一般ユーザにシンボリックリンク作成の権限が足りていない<br />
<ol class="org-ol">
<li>まず、windows左下にある検索欄から「ローカルセキュリティーポリシー」と検索を行います。<br /></li>
<li><p>
開いた後で<br />
</p>
<pre class="example">
ローカルポリシー ＞ ユーザ権限の割り当て ＞ シンボリックリンクの作成
</pre>
<p>
という順に押下します。<br />
画面が表示されますが、通常は「Administrators」しか書かれていないと思います。<br />
</p></li>
<li><code>ユーザまたはグループを追加する</code> を押下。<br /></li>
<li><code>オブジェクトの種類</code> を押下。<br /></li>
<li>初期状態では、「グループ」にチェックが入っていないと思うので、チェックを入れてやり、OKを押下します。<br /></li>
<li><code>選択するオブジェクトを入力してください</code> の欄に「Users」と入力し、OKを押下します。<br /></li>
</ol></li>
</ol>

<p>
これにて設定完了です。<br />
この変更を反映させるには、一度サインアウトし、再度サインインする必要があるので、Ctrl + Alt + Del を同時押しし、メニューからサインアウトを選択しましょう。<br />
</p>
</div>
</div>

<div id="outline-container-org0bdfe5b" class="outline-2">
<h2 id="org0bdfe5b">.gitignoreに記載したのに反映されない</h2>
<div class="outline-text-2" id="text-org0bdfe5b">
<p>
開発途中で.gitignoreを設定しても、今までgit管理下に置かれていたファイルやディレクトリは消えません。<br />
なので、過去にアップロードした画像ファイルなどはレポジトリに残っています。<br />
今回はそれらをレポジトリから消し去り、今後のgit管理対象からも外していきます。<br />
</p>

<ol class="org-ol">
<li><p>
キャッシュを削除<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git rm -r --cached . //ファイル全体キャッシュ削除
git rm -r --cached [ファイル名/ディレクトリ名]  //ファイルやディレクトリを指定してキャッシュ削除
</pre>
</div>
<p>
キャッシュの削除でなくとも、 <code>git rm</code> でファイルの追跡から外せる。<br />
</p></li>
<li>commit &amp; push<br /></li>
</ol>

<p>
キャッシュ削除の際、ファイルを削除しているわけではないのでご安心を。<br />
また、pushした際に大量のremoveログが出るが、ローカルのファイルが消えたわけではないのでご安心を。<br />
</p>
</div>
</div>

<div id="outline-container-org572bc12" class="outline-2">
<h2 id="org572bc12">git 管理に含めない設定について (.gitignore)</h2>
<div class="outline-text-2" id="text-org572bc12">
<p>
.gitignore を作業ディレクトリに作成<br />
設定の有効範囲は .gitignore ファイルの有るフォルダ内全部<br />
</p>

<ul class="org-ul">
<li><p>
sample1.rbファイルをGit管理下から除外する<br />
</p>
<pre class="example">
sample1.rb
</pre></li>
<li><p>
コメント<br />
</p>
<pre class="example">
# "#" で始まる行はコメント
</pre></li>
<li><p>
特定の拡張子を無視する<br />
</p>
<pre class="example">
# exe ファイルは要らない
*.exe
</pre></li>
<li><p>
特定のフォルダの中身全てを無視する<br />
</p>
<pre class="example">
# bin フォルダは要らない
bin/
</pre></li>
<li><p>
特定のパターンを無視しない<br />
</p>
<pre class="example">
# nuget.exe は必用なファイル
!/.nuget/nuget.exe
</pre></li>
<li><p>
フォルダ内の特定拡張子を無視<br />
</p>
<pre class="example">
# パッケージフォルダ内の .ts ファイルは要らない
package/**/*.ts
</pre></li>
<li>フォルダそのものを残したい場合<br />
Git はファイルを管理しているだけなので、空のディレクトリのディレクトリ構造を保存できない。<br />
残しておきたいフォルダの中に .gitkeep というファイル名で空のファイルを作成すしてディレクトリを残す方法がある。(このファイル名は何でもいい)<br /></li>
</ul>
</div>
</div>

<div id="outline-container-orge9bfa8a" class="outline-2">
<h2 id="orge9bfa8a">git log</h2>
<div class="outline-text-2" id="text-orge9bfa8a">
<p>
git log &#x2013;oneline : git log をコンパクトに出力。ざっと履歴を見る時に<br />
git log -p : git log に加えて、変更箇所も出力<br />
git log &#x2013;stat : git log に加えて、どのファイルがどれくらい変更されたかを出力<br />
</p>
</div>
</div>

<div id="outline-container-org8ba6ba3" class="outline-2">
<h2 id="org8ba6ba3">git diff 差分を見る</h2>
<div class="outline-text-2" id="text-org8ba6ba3">
<ul class="org-ul">
<li><p>
git pull する前にリモートとの変更点を見る<br />
ここでいうリモート名は origin とか<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git diff HEAD..リモート名/ブランチ名
</pre>
</div></li>
<li><p>
git push する前にリモートとの変更点を見る<br />
.. の右側が時系列的に最新とみなされるので、この場合は git commit した後にリモートリポジトリとそのこれから push したい箇所を表示したい場合に使える<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git diff リモート名/ブランチ名..HEAD
</pre>
</div></li>
<li><p>
git add する前に変更点を見る<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git diff
</pre>
</div></li>
<li><p>
git add した後に変更点を見る<br />
</p>
<div class="org-src-container">
<pre class="src src-bash"># 同じ結果
git diff --cached
git diff --staged
</pre>
</div></li>
<li><p>
今回コミットした変更点を見る<br />
本来は git diff HEAD<sup>..HEAD</sup> と書くのが正しいが、.. の右側を省略すると暗示的に現在のブランチのHEADを示すことになるので、この書き方で問題なし<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git diff HEAD^
</pre>
</div></li>
<li><p>
前回コミット(HEAD)からの差分<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git diff HEAD
</pre>
</div></li>
<li><p>
コミット同士を比較する<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git diff 変更前のSHA..変更後のSHA
</pre>
</div></li>
<li><p>
あるコミットの変更点を見る<br />
確認したいコミットの SHA だけ分かれば、^ を使うことでそのコミットで変更されたファイルも確認できます。<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git diff 確認したいコミットのSHA^..確認したいコミットのSHA
</pre>
</div></li>
<li><p>
ブランチ同士を比較する<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git diff ブランチA..ブランチB
</pre>
</div></li>
<li><p>
別ファイル同士を比較する<br />
&#x2013; の後は常にパスとして認識されます。<br />
で、それを2つ並べるとそのパス同士の比較になります。<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git diff -- ファイルパスA ファイルパスB
</pre>
</div></li>
<li><p>
どれくらい変更したかだけを見る<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git diff --stat
</pre>
</div></li>
<li><p>
ファイル名だけ見る<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git diff --name-only
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org04a2c87" class="outline-2">
<h2 id="org04a2c87">既存リポジトリでの git init</h2>
<div class="outline-text-2" id="text-org04a2c87">
<p>
誤って git init してしまっても取り消し操作は不要。この操作は非常に安全な操作である。<br />
<code>Reinitialized existing Git repository in ...</code> というメッセージが出るが心配不要。<br />
以下ネット上のドキュメンテーションより<br />
</p>
<pre class="example">
Running git init in an existing repository is safe. 
It will not overwrite things that are already there. 
The primary reason for rerunning git init is to pick up newly added templates.
</pre>
</div>
</div>

<div id="outline-container-orgf93a7e2" class="outline-2">
<h2 id="orgf93a7e2">コミットはせずに変更を退避する (git stash)</h2>
<div class="outline-text-2" id="text-orgf93a7e2">
<ul class="org-ul">
<li><p>
変更を退避する<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git stash
</pre>
</div></li>
<li><p>
退避した作業の一覧を見る<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git stash list
</pre>
</div></li>
<li><p>
退避した作業を戻す<br />
<code>stash apply stash名</code><br />
</p>
<div class="org-src-container">
<pre class="src src-bash">// stash@{0}の作業をもとに戻すとき
git stash apply stash@{0}
</pre>
</div>
<p>
上記コマンドだと、addしていた変更もaddされていない状態で戻る。addした状態そのままに戻したい時は、上記のコマンドに&#x2013;indexオプションを付けて実行<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git stash apply stash@{0} --index
</pre>
</div></li>
<li><p>
退避した作業を消す<br />
stashを使用して退避した作業を元に戻しても、退避した作業はそのまま残る。退避した作業を消すには、以下のコマンドを使用。<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">// stash@{0}を削除します
git stash drop stash@{0}
</pre>
</div></li>
<li><p>
退避した作業を元に戻すと同時に、stashのリストから消す<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">// stash@{0}の作業をもとに戻すと同時に、退避作業の中から削除します
git stash pop stash@{0}
</pre>
</div></li>
<li><p>
addした変更以外を退避させる<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git stash -k
</pre>
</div></li>
<li><p>
退避した作業をすべて消す<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git stash clear
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-orgb93f08c" class="outline-2">
<h2 id="orgb93f08c">コミット日時を修正する方法</h2>
<div class="outline-text-2" id="text-orgb93f08c">
<p>
<code>amend</code> して <code>rebase</code> するので、push 前のワーキングブランチでやること<br />
基本的に <code>git push -f</code> でリモートブランチの過去を改変したりはしないこと<br />
</p>

<ul class="org-ul">
<li>直前のコミット日時を修正 (直前コミットの修正と基本は同じ)<br />
<ol class="org-ol">
<li><p>
現状のコミット日時を確認<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git log --pretty=fuller
</pre>
</div></li>
<li><p>
AuthorDate を修正する<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git commit --amend --date="Sat Sep 21 15:00:00 2019 +0900"
</pre>
</div>
<p>
エディタが立ち上がるので保存して終了する<br />
</p></li>
<li><p>
CommitDate を AuthorDate に合わせて修正する<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git rebase HEAD~1 --committer-date-is-author-date
</pre>
</div></li>
<li><p>
CommitDate, AuthorDate 共に日時が変更されていることを確認<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git log --pretty=fuller
</pre>
</div></li>
</ol></li>

<li>２つ以上前のコミット日時を修正<br />
<ol class="org-ol">
<li><p>
現状のコミット日時を確認<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git log --pretty=fuller
</pre>
</div></li>
<li><p>
3つ分のコミット時間を修正することにする<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git rebase -i HEAD~3
</pre>
</div>
<p>
エディタが立ち上がるので、変更したいコミットに対して pick を edit に変えて保存<br />
</p>
<pre class="example">
1 pick 7b92777 Second commit
2 pick 1338ca6 Third commit
3 pick a505b00 Foyrth commit

↓

1 edit 7b92777 Second commit
2 edit 1338ca6 Third commit
3 edit a505b00 Foyrth commit
</pre></li>
<li><p>
edit にしたコミットを、古いものから修正していく<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git commit --amend --date="Sat Sep 21 16:00:00 2019 +0900"
</pre>
</div>
<p>
エディタが立ち上がるので保存して終了<br />
</p></li>
<li><p>
これで <code>7b92777 Second commit</code> は修正できたので、次のコミットに移る<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git rebase --continue
</pre>
</div>
<p>
残り2つのコミットも同じように修正<br />
最後のコミットで <code>git rebase --continue</code> すると、 <code>Successdfully rebased and updated refs/heads/master.</code> と表示されて完了<br />
</p></li>
<li><p>
3つ分のコミットについて、 CommitDate を AuthorDate に合わせて修正する<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git rebase HEAD~3 --committer-date-is-author-date
</pre>
</div></li>
<li><p>
CommitDate, AuthorDate 共に日時が変更されていることを確認<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git log --pretty=fuller
</pre>
</div></li>
</ol></li>
</ul>
</div>
</div>

<div id="outline-container-orgc703457" class="outline-2">
<h2 id="orgc703457">git rm とは</h2>
<div class="outline-text-2" id="text-orgc703457">
<p>
rmコマンドと違い、ステージングエリアに反映させるので、いちいちステージングエリアにaddしなくてもそのままgit commitできる。<br />
</p>
</div>
</div>

<div id="outline-container-orgc486199" class="outline-2">
<h2 id="orgc486199">ローカルブランチを削除する</h2>
<div class="outline-text-2" id="text-orgc486199">
<ol class="org-ol">
<li><p>
ローカルブランチの確認<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git branch
</pre>
</div></li>
<li><p>
削除コマンド1<br />
</p>
<div class="org-src-container">
<pre class="src src-bash"># どちらも同じ
git branch --delete [ブランチ名]
git branch -d [ブランチ名]
</pre>
</div></li>
<li><p>
削除コマンド2<br />
どんなローカルブランチも削除できる<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git branch -D [ブランチ名]
</pre>
</div></li>
</ol>
</div>
</div>

<div id="outline-container-orgdadb61c" class="outline-2">
<h2 id="orgdadb61c">誤って commit/push してしまったときの commit/push の取り消し方法 (修正ではなく無かったことにする)</h2>
<div class="outline-text-2" id="text-orgdadb61c">
<p>
push したこと自体をなかったことにしたい場合は、誤って push した分のコミットを戻してファイルの変更もコミットもなかったことにし、強制PUSHを行う。<br />
</p>

<ul class="org-ul">
<li><p>
戻したいコミットが直前だけの場合<br />
ローカルでの直前のコミットを取り消して、リモートブランチへ強制pushすることで取り消す。<br />
</p>

<p>
コミットの取り消し<br />
</p>
<div class="org-src-container">
<pre class="src src-bash"># ローカルの直前のコミットを取り消す
git reset --hard HEAD^
</pre>
</div>
<p>
プッシュの取り消し<br />
ブランチ名の前に+をつけることで強制PUSHになる。<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git push origin +master
#または
git push origin +develop
#など
</pre>
</div></li>

<li><p>
戻したいコミットが複数回分の場合<br />
まず <code>git log</code> で戻したい位置のコミットIDを確認する。<br />
そして先程確認したコミットIDまでコミットを戻す。<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git checkout コミットID
</pre>
</div>
<p>
このままだと、HEADにいる状態になっているため、ブランチ名をリネームして置き換える。<br />
</p>
<div class="org-src-container">
<pre class="src src-bash"># 今いる場所がHEADになっていることがわかる
git branch
# (HEAD detached at b08a643)

# 元のmasterブランチをリネームする
git branch -m master master_old

# 今のHEADを元にmasterブランチを作成し、移動する
git checkout -b master

git branch
# * master
#   master_old
</pre>
</div>
<p>
強制PUSHで状態を元に戻す。<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git push origin +master
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-orgb0a3bf5" class="outline-2">
<h2 id="orgb0a3bf5">直前のコミットを(軽く)修正する方法</h2>
<div class="outline-text-2" id="text-orgb0a3bf5">
<p>
コミットメッセージを直したい or 前回のコミット内容を少し修正したい(新たにコミットはしたくない) ときに有効<br />
<code>git commit --amend</code> で直前のコミットを変更できる<br />
</p>
<div class="org-src-container">
<pre class="src src-bash"># ファイルの修正を行ってから (無修正でも可)
# ファイルの修正を行った場合は git add して
git add ～
# 以下コマンドで直前のコミット内容を現在のものに変更する
git commit --amend
# エディタが立ち上がるため、コミットメッセージを修正したい場合はここで修正する
# git commit --amend --no-edit とすれば、前回のコミットメッセージのままコミットする
</pre>
</div>
<p>
強制pushすればリモートも修正される<br />
</p>
</div>
</div>

<div id="outline-container-orgf103cf5" class="outline-2">
<h2 id="orgf103cf5">誤って削除・編集したファイルを復元する方法</h2>
<div class="outline-text-2" id="text-orgf103cf5">
<ul class="org-ul">
<li>commit する前<br />
<ul class="org-ul">
<li><p>
ファイルを削除してしまった場合<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git checkout file_name
</pre>
</div></li>
<li><p>
ファイルを編集してしまった場合<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git checkout file_name
</pre>
</div></li>
</ul></li>

<li><p>
commit した後 (特定のコミット地点にファイルを戻す)<br />
</p>
<ul class="org-ul">
<li><p>
ファイルを削除してしまった場合<br />
まず <code>git log</code> で戻したい地点のコミットIDを確認します。<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git checkout コミットID (ファイル名)
</pre>
</div></li>
<li><p>
ファイルを編集してしまった場合<br />
まず <code>git log</code> で戻したい地点のコミットIDを確認します。<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git checkout コミットID (ファイル名)
</pre>
</div></li>
</ul>
<p>
push する場合はもう少し操作が必要<br />
このままだと、HEADにいる状態になっているため、ブランチ名をリネームして置き換える。<br />
</p>
<div class="org-src-container">
<pre class="src src-bash"># 今いる場所がHEADになっていることがわかる
git branch
# (HEAD detached at b08a643)

# 元のmasterブランチをリネームする
git branch -m master master_old

# 今のHEADを元にmasterブランチを作成し、移動する
git checkout -b master

git branch
# * master
#   master_old
</pre>
</div>
<p>
強制PUSHで状態を元に戻す。<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git push origin +master
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org44f523d" class="outline-2">
<h2 id="org44f523d">git add を取り消す</h2>
<div class="outline-text-2" id="text-org44f523d">
<ul class="org-ul">
<li><p>
はじめてのgit add を取り消す<br />
git init 直後のgit addを取り消したい場合<br />
</p>
<div class="org-src-container">
<pre class="src src-bash"># 全てのファイルを取り消し
git rm --cached -r .
# 特定のファイルのみ取り消し
git rm --cached -r file_name
</pre>
</div></li>

<li><p>
2回目以降のgit add を取り消す<br />
</p>
<div class="org-src-container">
<pre class="src src-bash"># 全てのファイルを取り消し
git reset HEAD
# 特定のファイルのみ取り消し
git reset HEAD file_name
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-orga1a1a24" class="outline-2">
<h2 id="orga1a1a24">reset と checkout の違い</h2>
<div class="outline-text-2" id="text-orga1a1a24">
<ol class="org-ol">
<li>コミットレベルの時<br />
<ul class="org-ul">
<li><p>
reset<br />
<code>git reset [--soft|--mixed|--hard] &lt;commit&gt;</code><br />
指定された &lt;commit&gt; まで HEAD を移動させ, それまでのコミットを破棄します.<br />
</p>
<pre class="example">
                 HEAD
                  |
                  v
                 master
                  |
                  v
A --- B --- C --- D
</pre>
<p>
C と D を破棄して B からやり直したいという場合, 次のようになります:<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git reset HEAD~2
</pre>
</div>
<pre class="example">
     HEAD
      |
      v
     master
      |
      v
A --- B
</pre>
<p>
今回は &#x2013;soft, &#x2013;mixed, &#x2013;hard いずれかのオプションを付け加えなかったので, デフォルトの &#x2013;mixed が暗黙的に付け加えられます.<br />
&#x2013;mixed は Working Directory は D の状態のまま維持しますが, Staging Area は C の状態に変更します.<br />
オプションの違いは次のようになります:<br />
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">Working Directory</th>
<th scope="col" class="org-left">Staging Area</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#x2013;soft</td>
<td class="org-left">Keeped</td>
<td class="org-left">Keeped</td>
</tr>

<tr>
<td class="org-left">&#x2013;mixed</td>
<td class="org-left">Keeped</td>
<td class="org-left">Changed</td>
</tr>

<tr>
<td class="org-left">&#x2013;hard</td>
<td class="org-left">Changed</td>
<td class="org-left">Changed</td>
</tr>
</tbody>
</table></li>

<li>checkout<br />
<ul class="org-ul">
<li><p>
指定したコミットに HEAD を移動させる<br />
<code>git checkout &lt;commit-or-branch&gt;</code><br />
次のようなコミットをしてきたとして:<br />
</p>
<pre class="example">
                HEAD
                 |
                 v
                master
                 |
                 v
A --- B ---C --- D
</pre>
<p>
次のようにすると:<br />
</p>
<div class="org-src-container">
<pre class="src src-bash">git checkout HEAD~2
</pre>
</div>
<p>
次のようになります:<br />
</p>
<pre class="example">
     HEAD       master
      |          |
      v          v
A --- B ---C --- D
</pre>
<p>
Working Directory の状態が B に変更され, B のファイルを調べることができます.<br />
また HEAD が master から離れ B に移動したことによって ‘detached HEAD’ という状態になりました.<br />
この状態だと実験的なコミットを作って破棄したり, 新しくブランチを作って, そこから作る新たなコミットを保持することもできます.<br />
</p></li>

<li>指定したブランチに HEAD を移動させる<br />
<code>git checkout master</code><br />
HEAD や HEAD~2 といったコミットではく, master などとブランチを指定するとその指定したブランチに HEAD を移動させることができます.<br />
そしてコミットを指定した時と同じように Working Directory を指定したブランチのものに変更します.<br /></li>
</ul></li>
</ul></li>

<li>ファイルレベルの時<br />
<ul class="org-ul">
<li>reset<br />
git reset がファイルレベルで使われると, コミットレベルで使われる場合とうって変わり, プライベートレポジトリでも使うことができるようになります.<br />
また &#x2013;soft, &#x2013;mixed, &#x2013;hard といったオプションを付け加えることができなくなります.<br />
<code>git reset &lt;commit&gt; &lt;file&gt;</code><br />
指定した &lt;commit&gt; の &lt;file&gt; を現在の Staging Area に持ってきます.<br />
ステージしたファイルをアンステージする場合にも使える<br /></li>

<li>checkout<br />
<code>git checkout &lt;commit&gt; &lt;file&gt;...</code><br />
コミットレベルの場合と異なりファイルレベルの checkout は HEAD が移動しません.<br />
指定した &lt;commit&gt; の指定した &lt;file&gt; を現在の Working Directory と Staging Area に持ってきます.<br />
git reset のファイルレベルも同じような働きをしますが, そっちの方は Staging Area のみ変更し,<br />
git checkout のファイルレベルは Staging Area に加えて Working Directory も変更します.<br /></li>
</ul></li>
</ol>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2021-03-24 水 00:03</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
