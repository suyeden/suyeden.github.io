<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>PHP 例文</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="css/style.css"/>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2020 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">PHP 例文</h1>
<div id="outline-container-org0ddd77a" class="outline-2">
<h2 id="org0ddd77a"></h2>
<div class="outline-text-2" id="text-org0ddd77a">
<hr />
</div>
<div id="outline-container-org6b6525e" class="outline-3">
<h3 id="org6b6525e"><a href="index.html">home</a></h3>
<div class="outline-text-3" id="text-org6b6525e">
<hr />
</div>
</div>
</div>

<div id="outline-container-orgf52fc48" class="outline-2">
<h2 id="orgf52fc48">掲示板</h2>
<div class="outline-text-2" id="text-orgf52fc48">
</div>
<div id="outline-container-org4e9b91e" class="outline-3">
<h3 id="org4e9b91e">bbs.php</h3>
<div class="outline-text-3" id="text-org4e9b91e">
<pre class="example">
&lt;!DOCTYPE html&gt;
&lt;?php
// 1ページに表示されるコメントの数
$num = 5;

// データベースに接続
$dsn = 'mysql:host=localhost;dbname=website;charset=utf8';
$user = 'websiteuser';
$password = '0212';

// ページ数が指定されている時
$page = 0;
if (isset($_GET['page']) &amp;&amp; $_GET['page'] &gt; 0) {
    $page = intval($_GET['page']) - 1;
}

try {
    $db = new PDO($dsn, $user, $password);
    $db-&gt;setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    // プリペアドステートメントを作成
    $stmt = $db-&gt;prepare("SELECT * FROM contact ORDER BY date DESC LIMIT :page, :num");
    // パラメータを割り当て
    $page = $page * $num;
    $stmt-&gt;bindParam(':page', $page, PDO::PARAM_INT);
    $stmt-&gt;bindParam(':num', $num, PDO::PARAM_INT);
    // クエリの実行
    $stmt-&gt;execute();
} catch (PDOException $e) {
    echo "エラー：" . $e-&gt;getMessage();
}
?&gt;

&lt;html lang="ja"&gt;
  &lt;head&gt;
    &lt;meta charset="UTF-8"/&gt;
    &lt;title&gt;掲示板&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;form action="write.php" method="post"&gt;
      &lt;p&gt;名前：&lt;input type="text" name="name" value="名無しさん" /&gt;&lt;/p&gt;
      &lt;p&gt;タイトル：&lt;input type="text" name="title"/&gt;（無題可）&lt;/p&gt;
      &lt;textarea name="body"&gt;&lt;/textarea&gt;
      &lt;p&gt;削除パスワード（数字4桁）：&lt;input type="text" name="pass"/&gt;&lt;/p&gt;
      &lt;p&gt;&lt;input type="submit" value="書き込む"/&gt;&lt;/p&gt;
    &lt;/form&gt;
    &lt;?php
    while ($row = $stmt-&gt;fetch()) {
        if ($row['title']) {
            $title = $row['title'];
        } else {
            $title = '（無題）';
        }
    ?&gt;
    &lt;p&gt;名前：&lt;?php echo $row['name'] ?&gt;&lt;/p&gt;
    &lt;p&gt;タイトル：&lt;?php echo $title ?&gt;&lt;/p&gt;
    &lt;p&gt;&lt;?php echo nl2br($row['body'], false) ?&gt;&lt;/p&gt;
    &lt;p&gt;&lt;?php echo $row['date'] ?&gt;&lt;/p&gt;
    &lt;form action="delete.php" method="post"&gt;
      &lt;input type="hidden" name="id" value="&lt;?php echo $row ['id']; ?&gt;" /&gt;
      &lt;p&gt;削除パスワード：&lt;input type="password" name="pass"&gt;&lt;/p&gt;
      &lt;p&gt;&lt;input type="submit" value="削除"/&gt;&lt;/p&gt;
    &lt;/form&gt;
          &lt;?php
          }

          // ページ数の表示
          try {
              // プリペアドステートメントを作成
              $stmt = $db-&gt;prepare("SELECT COUNT(*) FROM contact");
              // クエリの実行
              $stmt-&gt;execute();
          } catch (PDOException $e) {
              echo "エラー：" . $e-&gt;getMessage();
          }

          // コメントの件数を取得
          $comments = $stmt-&gt;fetchColumn();
          // ページ数を計算
          $max_page = ceil($comments / $num);
          echo '&lt;p&gt;';
          for ($i = 0; $i &lt; $max_page; $i++) {
              echo '&lt;a href="bbs.php?page=' . ($i + 1) . '"&gt;' . ($i + 1) . '&lt;/a&gt;&amp;nbsp;';
          }
          echo '&lt;/p&gt;';
          ?&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre>
</div>
</div>
<div id="outline-container-org10d544d" class="outline-3">
<h3 id="org10d544d">write.php</h3>
<div class="outline-text-3" id="text-org10d544d">
<pre class="example">
&lt;?php
// データの受け取り
$name = $_POST['name'];
$title = $_POST['title'];
$body = $_POST['body'];
$pass = $_POST['pass'];

// 必須項目チェック
if ($name == '' || $body == '') {
    header('Location: bbs.php'); // bbs.php へ移動
    exit(); // 終了
}
if (!preg_match("/^[0-9]{4}$/", $pass)) {
    header('Location: bbs.php');
    exit();
}

// データベースに接続
$dsn = 'mysql:host=localhost;dbname=website;charset=utf8';
$user = 'websiteuser';
$password = '0212';

try {
    $db = new PDO($dsn, $user, $password);
    $db-&gt;setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    // プリペアドステートメントを作成
    $stmt = $db-&gt;prepare("
    INSERT INTO contact (name, title, body, date, pass)
    VALUES (:name, :title, :body, now(), :pass)"
    );
    // パラメータを割り当て
    $stmt-&gt;bindParam(':name', $name, PDO::PARAM_STR);
    $stmt-&gt;bindParam(':title', $title, PDO::PARAM_STR);
    $stmt-&gt;bindParam(':body', $body, PDO::PARAM_STR);
    $stmt-&gt;bindParam(':pass', $pass, PDO::PARAM_STR);
    // クエリの実行
    $stmt-&gt;execute();

    // bbs.php に戻る
    header('Location: bbs.php');
    exit();
} catch (PDOException $e) {
    die ('エラー：' . $e-&gt;getMessage());
}
?&gt;
</pre>
</div>
</div>
<div id="outline-container-org0120d42" class="outline-3">
<h3 id="org0120d42">delete.php</h3>
<div class="outline-text-3" id="text-org0120d42">
<pre class="example">
&lt;?php
// データの受け取り
$id = intval($_POST['id']);
$pass = $_POST['pass'];

// 必須項目チェック
if ($id == '' || $pass == '') {
    header('Location: bbs.php');
    exit();
}

// データベースに接続
$dsn = 'mysql:host=localhost;dbname=website;charset=utf8';
$user = 'websiteuser';
$password = '0212';

try {
    $db = new PDO($dsn, $user, $password);
    $db-&gt;setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    // プリペアドステートメントを作成
    $stmt = $db-&gt;prepare("DELETE FROM contact WHERE id=:id AND pass=:pass");
    // パラメータを割り当て
    $stmt-&gt;bindParam(':id', $id, PDO::PARAM_INT);
    $stmt-&gt;bindParam(':pass', $pass, PDO::PARAM_STR);
    // クエリの実行
    $stmt-&gt;execute();
} catch (PDOException $e) {
    echo "エラー：" . $e-&gt;getMessage();
}
header("Location: bbs.php");
exit();
?&gt;
</pre>
</div>
</div>
<div id="outline-container-org22316dc" class="outline-3">
<h3 id="org22316dc">login.php</h3>
<div class="outline-text-3" id="text-org22316dc">
<pre class="example">
&lt;!doctype html&gt;
&lt;?php
session_start(); // セッション開始

if (isset($_SESSION['id'])) {
    // セッションにユーザIDがある = ログインしている
    // トップページに遷移する
    header('Location: bbs.php');

} else if (isset($_POST['name']) &amp;&amp; isset($_POST['password'])) {
    // ログインしていないがユーザ名とパスワードが送信されたとき

    // データベースに接続
    $dsn = 'mysql:host=localhost;dbname=website;charset=utf8';
    $user = 'websiteuser';
    $password = '0212'; // websiteuser に設定したパスワード

    try {
        $db = new PDO($dsn, $user, $password);
        $db-&gt;setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
        // プリペアドステートメントを作成
        $stmt = $db-&gt;prepare("SELECT * FROM users WHERE name=:name AND password=:pass");
        // パラメータを割り当て
        $stmt-&gt;bindParam(':name', $_POST['name'], PDO::PARAM_STR);
        $stmt-&gt;bindParam(':pass', sha1($_POST['password']), PDO::PARAM_STR);
        // クエリの実行
        $stmt-&gt;execute();

        if ($row = $stmt-&gt;fetch()) {
            // ユーザが存在していたので、セッションにユーザIDをセット
            $_SESSION['id'] = $row['id'];
            header('Location: bbs.php');
            exit();
        } else {
            // 1レコードも取得できなかった時
            // ユーザ名・パスワードが間違っている可能性あり
            // もう一度ログインフォームを表示
            header('Location: login.php');
            exit();
        }
    } catch (PDOException $e) {
        die('エラー：' . $e-&gt;getMessage());
    }

} else {
    // ログインしていない場合はログインフォームを表示する
    // （ } はここでもいい）
    // }
?&gt;
  &lt;html lang="ja"&gt;
    &lt;head&gt;
      &lt;meta charset="UTF-8"/&gt;
      &lt;title&gt;管理者ページ&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;

      &lt;h1&gt;管理者ページ&lt;/h1&gt;

      &lt;h2&gt;ログイン&lt;/h2&gt;
      &lt;form action="login.php" method="post"&gt;
        &lt;p&gt;ユーザー名：&lt;input name="name" type="text" /&gt;&lt;/p&gt;
        &lt;p&gt;パスワード：&lt;input name="password" type="password" /&gt;&lt;/p&gt;
        &lt;p&gt;&lt;input type="submit" value="ログイン"/&gt;&lt;/p&gt;
      &lt;/form&gt;
    &lt;/body&gt;
  &lt;/html&gt;
&lt;?php } ?&gt;
</pre>
</div>
</div>
<div id="outline-container-org181bbdd" class="outline-3">
<h3 id="org181bbdd">includes/login.php</h3>
<div class="outline-text-3" id="text-org181bbdd">
<p>
「include 'includes/login.php';」でファイル読み込み<br />
</p>
<pre class="example">
&lt;?php
session_start();
if(!isset($_SESSION['id'])) {
    header('Location: login.php');
    exit();
}
?&gt;
</pre>
</div>
</div>
<div id="outline-container-org5d636aa" class="outline-3">
<h3 id="org5d636aa">logout.php</h3>
<div class="outline-text-3" id="text-org5d636aa">
<p>
「&lt;a href="logout.php"&gt;ログアウト&lt;/a&gt;」のようなメニューを追加して使う。<br />
</p>
<pre class="example">
&lt;?php
session_start();
if (isset($_SESSION['id'])) {
    unset($_SESSION['id']);
}
header('Location: index.php');
?&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc00d81e" class="outline-2">
<h2 id="orgc00d81e">MySQL 例文</h2>
<div class="outline-text-2" id="text-orgc00d81e">
</div>
<div id="outline-container-orga969b22" class="outline-3">
<h3 id="orga969b22">テーブル設計</h3>
<div class="outline-text-3" id="text-orga969b22">
</div>
<div id="outline-container-org454e0c1" class="outline-4">
<h4 id="org454e0c1">掲示板用テーブル</h4>
<div class="outline-text-4" id="text-org454e0c1">
<pre class="example">
CREATE TABLE bbs(
  id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  name VARCHAR(255) NOT NULL,
  title VARCHAR(255);
  body TEXT NOT NULL;
  date DATETIME NOT NULL;
  pass CHAR(4) NOT NULL
)DEFAULT CHARACTER SET =utf8;
</pre>
</div>
</div>
<div id="outline-container-org465cc09" class="outline-4">
<h4 id="org465cc09">ログイン機能用テーブル</h4>
<div class="outline-text-4" id="text-org465cc09">
<pre class="example">
CREATE TABLE users(
  id INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
  name VARCHAR(255) NOT NULL,
  passowrd VARCHAR(255) NOT NULL
)DEFAULT CHARACTER SET=utf8;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf19154b" class="outline-3">
<h3 id="orgf19154b">レコードの追加</h3>
<div class="outline-text-3" id="text-orgf19154b">
<pre class="example">
INSERT INTO users (name, password) VALUES ('yamada', sha1('yamadapass'))
</pre>
<p>
複数追加したい場合<br />
</p>
<pre class="example">
INSERT INTO users (name, password) VALUES
  ('yamada', sha1('yamadapass')),
  ('tanaka', sha1('tanakapass')),
  ('suzuki', sha1('suzukipass'));
</pre>
</div>
</div>
</div>

<div id="outline-container-org312183c" class="outline-2">
<h2 id="org312183c">ファイルの読み込み操作</h2>
<div class="outline-text-2" id="text-org312183c">
<pre class="example">
&lt;?php
$fp = fopen("info.txt", "r"); //ファイルを開く
?&gt;

&lt;html&gt;
  &lt;?php
    // ファイルが正しく開けた時
    if($fp) {
        $title = fgets($fp); //ファイルから1行読み込む
        // 1行読み込めた時
        if($title) {
            ...
        } else {
            //ファイルの中身が空だった時
            ...
        }
    } else {
        //ファイルが開けなかった時
        ...
    }
  ?&gt;
&lt;/html&gt;
</pre>
<pre class="example">
&lt;?php
$fp = fopen("info.txt", "r"); //ファイルを開く
$line = array(); //ファイル内容を1行1要素に格納する配列
// ファイルが正しく開けた時
if($fp) {
    while(!feof($fp)) {
        $line[] = fgets($fp);
    }
    fclose($fp);
}
?&gt;

&lt;html&gt;
  &lt;?php
  if(count($line)&gt;0) {
      for($i=0; $i&lt;count($line); $i++) {
          if($i==0) { //はじめの行はタイトル
              echo '&lt;h3&gt;' . $line[0] . '&lt;/h3&gt;';
          } else {
              echo $line[$i] . '&lt;br&gt;';
          }
      }
  } else {
      //ファイルの中身が空だった時
      echo 'お知らせはありません';
  }
  ?&gt;
&lt;/html&gt;
</pre>
</div>
</div>

<div id="outline-container-org7fa2e22" class="outline-2">
<h2 id="org7fa2e22">ファイルの書き込み操作</h2>
<div class="outline-text-2" id="text-org7fa2e22">
<pre class="example">
&lt;?php
$fp = fopen("test.txt", "w");
if($fp) {
    fwrite($fp, "書き込みテスト1\n");
    fwrite($fp, "書き込みテスト2\n");
    fclose($fp);
    echo '書き込みました';
} else {
    //ファイルが上手く作成できない等のエラー時、ここへ来る
}
?&gt;
</pre>
</div>
</div>

<div id="outline-container-org87835e0" class="outline-2">
<h2 id="org87835e0">画像ファイルのアップロードプログラム</h2>
<div class="outline-text-2" id="text-org87835e0">
<pre class="example">
&lt;?php
$msg = null; //アップロード状況を表すメッセージ

// アップロード処理
if(isset($_FILE['image']) &amp;&amp; is_uploaded_file($_FILES['image']['tmp_name'])) {
    $old_name = $_FILES['image']['tmp_name'];
    $new_name = date("YmdHis"); //ベースとなるファイル名は日付
    $new_name .= mt_rand(); //ランダムな数字も追加
    switch(exif_imagetype($_FILES['image']['tmp_name'])) {
        case IMAGETYPE_JPEG:
            $new_name .= '.jpg';
            break;
        case IMAGETYPE_GIF:
            $new_name .= '.gif';
            break;
        case IMAGETYPE_PNG:
            $new_name .= '.png';
            break;
        default:
            header('Location: upload.php');
            exit();
    }
    if(move_uploaded_file($old_name, 'album/' . $new_name)) {
        $msg = 'アップロードしました';
    } else {
        $msg = 'アップロードできませんでした';
    }
}
?&gt;
</pre>
</div>
</div>
</div>
</body>
</html>
