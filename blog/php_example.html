<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>PHP 例文</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="css/style.css"/>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:e95b018ef3580986a04669f1b5879592219e2a7a&dn=public-domain.txt Public Domain
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="content">
<h1 class="title">PHP 例文</h1>
<div id="outline-container-org31206de" class="outline-2">
<h2 id="org31206de"></h2>
<div class="outline-text-2" id="text-org31206de">
<hr />
</div>
<div id="outline-container-org7a59fb5" class="outline-3">
<h3 id="org7a59fb5"><a href="index.html">home</a></h3>
<div class="outline-text-3" id="text-org7a59fb5">
<hr />
</div>
</div>
</div>

<div id="outline-container-org79e90a3" class="outline-2">
<h2 id="org79e90a3">掲示板</h2>
<div class="outline-text-2" id="text-org79e90a3">
</div>
<div id="outline-container-org41bf080" class="outline-3">
<h3 id="org41bf080">bbs.php</h3>
<div class="outline-text-3" id="text-org41bf080">
<pre class="example" id="org6968a6e">
&lt;!DOCTYPE html&gt;
&lt;?php
// 1ページに表示されるコメントの数
$num = 5;

// データベースに接続
$dsn = 'mysql:host=localhost;dbname=website;charset=utf8';
$user = 'websiteuser';
$password = '0212';

// ページ数が指定されている時
$page = 0;
if (isset($_GET['page']) &amp;&amp; $_GET['page'] &gt; 0) {
    $page = intval($_GET['page']) - 1;
}

try {
    $db = new PDO($dsn, $user, $password);
    $db-&gt;setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    // プリペアドステートメントを作成
    $stmt = $db-&gt;prepare("SELECT * FROM contact ORDER BY date DESC LIMIT :page, :num");
    // パラメータを割り当て
    $page = $page * $num;
    $stmt-&gt;bindParam(':page', $page, PDO::PARAM_INT);
    $stmt-&gt;bindParam(':num', $num, PDO::PARAM_INT);
    // クエリの実行
    $stmt-&gt;execute();
} catch (PDOException $e) {
    echo "エラー：" . $e-&gt;getMessage();
}
?&gt;

&lt;html lang="ja"&gt;
  &lt;head&gt;
    &lt;meta charset="UTF-8"/&gt;
    &lt;title&gt;掲示板&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;form action="write.php" method="post"&gt;
      &lt;p&gt;名前：&lt;input type="text" name="name" value="名無しさん" /&gt;&lt;/p&gt;
      &lt;p&gt;タイトル：&lt;input type="text" name="title"/&gt;（無題可）&lt;/p&gt;
      &lt;textarea name="body"&gt;&lt;/textarea&gt;
      &lt;p&gt;削除パスワード（数字4桁）：&lt;input type="text" name="pass"/&gt;&lt;/p&gt;
      &lt;p&gt;&lt;input type="submit" value="書き込む"/&gt;&lt;/p&gt;
    &lt;/form&gt;
    &lt;?php
    while ($row = $stmt-&gt;fetch()) {
        if ($row['title']) {
            $title = $row['title'];
        } else {
            $title = '（無題）';
        }
    ?&gt;
    &lt;p&gt;名前：&lt;?php echo $row['name'] ?&gt;&lt;/p&gt;
    &lt;p&gt;タイトル：&lt;?php echo $title ?&gt;&lt;/p&gt;
    &lt;p&gt;&lt;?php echo nl2br($row['body'], false) ?&gt;&lt;/p&gt;
    &lt;p&gt;&lt;?php echo $row['date'] ?&gt;&lt;/p&gt;
    &lt;form action="delete.php" method="post"&gt;
      &lt;input type="hidden" name="id" value="&lt;?php echo $row ['id']; ?&gt;" /&gt;
      &lt;p&gt;削除パスワード：&lt;input type="password" name="pass"&gt;&lt;/p&gt;
      &lt;p&gt;&lt;input type="submit" value="削除"/&gt;&lt;/p&gt;
    &lt;/form&gt;
          &lt;?php
          }

          // ページ数の表示
          try {
              // プリペアドステートメントを作成
              $stmt = $db-&gt;prepare("SELECT COUNT(*) FROM contact");
              // クエリの実行
              $stmt-&gt;execute();
          } catch (PDOException $e) {
              echo "エラー：" . $e-&gt;getMessage();
          }

          // コメントの件数を取得
          $comments = $stmt-&gt;fetchColumn();
          // ページ数を計算
          $max_page = ceil($comments / $num);
          echo '&lt;p&gt;';
          for ($i = 0; $i &lt; $max_page; $i++) {
              echo '&lt;a href="bbs.php?page=' . ($i + 1) . '"&gt;' . ($i + 1) . '&lt;/a&gt;&amp;nbsp;';
          }
          echo '&lt;/p&gt;';
          ?&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre>
</div>
</div>
<div id="outline-container-org533facb" class="outline-3">
<h3 id="org533facb">write.php</h3>
<div class="outline-text-3" id="text-org533facb">
<pre class="example" id="org987e2cf">
&lt;?php
// データの受け取り
$name = $_POST['name'];
$title = $_POST['title'];
$body = $_POST['body'];
$pass = $_POST['pass'];

// 必須項目チェック
if ($name == '' || $body == '') {
    header('Location: bbs.php'); // bbs.php へ移動
    exit(); // 終了
}
if (!preg_match("/^[0-9]{4}$/", $pass)) {
    header('Location: bbs.php');
    exit();
}

// データベースに接続
$dsn = 'mysql:host=localhost;dbname=website;charset=utf8';
$user = 'websiteuser';
$password = '0212';

try {
    $db = new PDO($dsn, $user, $password);
    $db-&gt;setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    // プリペアドステートメントを作成
    $stmt = $db-&gt;prepare("
    INSERT INTO contact (name, title, body, date, pass)
    VALUES (:name, :title, :body, now(), :pass)"
    );
    // パラメータを割り当て
    $stmt-&gt;bindParam(':name', $name, PDO::PARAM_STR);
    $stmt-&gt;bindParam(':title', $title, PDO::PARAM_STR);
    $stmt-&gt;bindParam(':body', $body, PDO::PARAM_STR);
    $stmt-&gt;bindParam(':pass', $pass, PDO::PARAM_STR);
    // クエリの実行
    $stmt-&gt;execute();

    // bbs.php に戻る
    header('Location: bbs.php');
    exit();
} catch (PDOException $e) {
    die ('エラー：' . $e-&gt;getMessage());
}
?&gt;
</pre>
</div>
</div>
<div id="outline-container-orgaf1f780" class="outline-3">
<h3 id="orgaf1f780">delete.php</h3>
<div class="outline-text-3" id="text-orgaf1f780">
<pre class="example" id="orgbbcadb1">
&lt;?php
// データの受け取り
$id = intval($_POST['id']);
$pass = $_POST['pass'];

// 必須項目チェック
if ($id == '' || $pass == '') {
    header('Location: bbs.php');
    exit();
}

// データベースに接続
$dsn = 'mysql:host=localhost;dbname=website;charset=utf8';
$user = 'websiteuser';
$password = '0212';

try {
    $db = new PDO($dsn, $user, $password);
    $db-&gt;setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    // プリペアドステートメントを作成
    $stmt = $db-&gt;prepare("DELETE FROM contact WHERE id=:id AND pass=:pass");
    // パラメータを割り当て
    $stmt-&gt;bindParam(':id', $id, PDO::PARAM_INT);
    $stmt-&gt;bindParam(':pass', $pass, PDO::PARAM_STR);
    // クエリの実行
    $stmt-&gt;execute();
} catch (PDOException $e) {
    echo "エラー：" . $e-&gt;getMessage();
}
header("Location: bbs.php");
exit();
?&gt;
</pre>
</div>
</div>
<div id="outline-container-org88ee749" class="outline-3">
<h3 id="org88ee749">login.php</h3>
<div class="outline-text-3" id="text-org88ee749">
<pre class="example" id="org06fe143">
&lt;!doctype html&gt;
&lt;?php
session_start(); // セッション開始

if (isset($_SESSION['id'])) {
    // セッションにユーザIDがある = ログインしている
    // トップページに遷移する
    header('Location: bbs.php');

} else if (isset($_POST['name']) &amp;&amp; isset($_POST['password'])) {
    // ログインしていないがユーザ名とパスワードが送信されたとき

    // データベースに接続
    $dsn = 'mysql:host=localhost;dbname=website;charset=utf8';
    $user = 'websiteuser';
    $password = '0212'; // websiteuser に設定したパスワード

    try {
        $db = new PDO($dsn, $user, $password);
        $db-&gt;setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
        // プリペアドステートメントを作成
        $stmt = $db-&gt;prepare("SELECT * FROM users WHERE name=:name AND password=:pass");
        // パラメータを割り当て
        $stmt-&gt;bindParam(':name', $_POST['name'], PDO::PARAM_STR);
        $stmt-&gt;bindParam(':pass', sha1($_POST['password']), PDO::PARAM_STR);
        // クエリの実行
        $stmt-&gt;execute();

        if ($row = $stmt-&gt;fetch()) {
            // ユーザが存在していたので、セッションにユーザIDをセット
            $_SESSION['id'] = $orw['id'];
            header('Location: bbs.php');
            exit();
        } else {
            // 1レコードも取得できなかった時
            // ユーザ名・パスワードが間違っている可能性あり
            // もう一度ログインフォームを表示
            header('Location: login.php');
            exit();
        }
    } catch (PDOException $e) {
        die('エラー：' . $e-&gt;getMessage());
    }

} else {
    // ログインしていない場合はログインフォームを評樹する
    // }
    // （ } はここでもいい）
?&gt;
  &lt;html lang="ja"&gt;
    &lt;head&gt;
      &lt;meta charset="UTF-8"/&gt;
      &lt;title&gt;管理者ページ&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;

      &lt;h1&gt;管理者ページ&lt;/h1&gt;

      &lt;h2&gt;ログイン&lt;/h2&gt;
      &lt;form action="login.php" method="post"&gt;
        &lt;p&gt;ユーザー名：&lt;input name="name" type="text" /&gt;&lt;/p&gt;
        &lt;p&gt;パスワード：&lt;input name="password" type="password" /&gt;&lt;/p&gt;
        &lt;p&gt;&lt;input type="submit" value="ログイン"/&gt;&lt;/p&gt;
      &lt;/form&gt;
    &lt;/body&gt;
  &lt;/html&gt;
&lt;?php } ?&gt;
</pre>
</div>
</div>
<div id="outline-container-orgbeb0bc9" class="outline-3">
<h3 id="orgbeb0bc9">include/login.php</h3>
<div class="outline-text-3" id="text-orgbeb0bc9">
<p>
「include 'include/login.php';」でファイル読み込み<br />
</p>
<pre class="example" id="org7d3b411">
&lt;?php
session_start();
if(!isset($_SESSION['id'])) {
    header('Location: login.php');
    exit();
}
?&gt;
</pre>
</div>
</div>
<div id="outline-container-org070b6a1" class="outline-3">
<h3 id="org070b6a1">logout.php</h3>
<div class="outline-text-3" id="text-org070b6a1">
<p>
「&lt;a href="logout.php"&gt;ログアウト&lt;/a&gt;」のようなメニューを追加して使う。<br />
</p>
<pre class="example" id="org512b880">
&lt;?php
session_start();
if (isset($_SESSION['id'])) {
    unset($_SESSION['id']);
}
header('Location: index.php');
?&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org42c2219" class="outline-2">
<h2 id="org42c2219">MySQL 例文</h2>
<div class="outline-text-2" id="text-org42c2219">
</div>
<div id="outline-container-orga3c0c9a" class="outline-3">
<h3 id="orga3c0c9a">テーブル設計</h3>
<div class="outline-text-3" id="text-orga3c0c9a">
</div>
<div id="outline-container-orgd23fa1c" class="outline-4">
<h4 id="orgd23fa1c">掲示板用テーブル</h4>
<div class="outline-text-4" id="text-orgd23fa1c">
<pre class="example" id="org13c3ff2">
CREATE TABLE bbs(
  id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  name VARCHAR(255) NOT NULL,
  title VARCHAR(255);
  body TEXT NOT NULL;
  date DATETIME NOT NULL;
  pass CHAR(4) NOT NULL
)DEFAULT CHARACTER SET =utf8;
</pre>
</div>
</div>
<div id="outline-container-org7bd9e51" class="outline-4">
<h4 id="org7bd9e51">ログイン機能用テーブル</h4>
<div class="outline-text-4" id="text-org7bd9e51">
<pre class="example" id="orgb7782f9">
CREATE TABLE users(
  id INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
  name VARCHAR(255) NOT NULL,
  passowrd VARCHAR(255) NOT NULL
)DEFAULT CHARACTER SET=utf8;
</pre>
</div>
</div>
</div>
<div id="outline-container-org580937e" class="outline-3">
<h3 id="org580937e">レコードの追加</h3>
<div class="outline-text-3" id="text-org580937e">
<pre class="example" id="org3ea2fa0">
INSERT INTO users (name, password) VALUES ('yamada', sha1('yamadapass'))
</pre>
<p>
複数追加したい場合<br />
</p>
<pre class="example" id="org7702906">
INSERT INTO users (name, password) VALUES
  ('yamada', sha1('yamadapass')),
  ('tanaka', sha1('tanakapass')),
  ('suzuki', sha1('suzukipass'));
</pre>
</div>
</div>
</div>

<div id="outline-container-orga633e1c" class="outline-2">
<h2 id="orga633e1c">ファイルの読み込み操作</h2>
<div class="outline-text-2" id="text-orga633e1c">
<pre class="example" id="org453cf4c">
&lt;?php
$fp = fopen("info.txt", "r"); //ファイルを開く
?&gt;

&lt;html&gt;
  &lt;?php
    // ファイルが正しく開けた時
    if($fp) {
        $title = fgets($fp); //ファイルから1行読み込む
        // 1行読み込めた時
        if($title) {
            ...
        } else {
            //ファイルの中身が空だった時
            ...
        }
    } else {
        //ファイルが開けなかった時
        ...
    }
  ?&gt;
&lt;/html&gt;
</pre>
<pre class="example" id="orgc7153b1">
&lt;?php
$fp = fopen("info.txt", "r"); //ファイルを開く
$line = array(); //ファイル内容を1行1要素に格納する配列
// ファイルが正しく開けた時
if($fp) {
    while(!feof($fp)) {
        $line[] = fgets($fp);
    }
    fclose($fp);
}
?&gt;

&lt;html&gt;
  &lt;?php
  if(count($line)&gt;0) {
      for($i=0; $i&lt;count($line); $i++) {
          if($i==0) { //はじめの行はタイトル
              echo '&lt;h3&gt;' . $line[0] . '&lt;/h3&gt;';
          } else {
              echo $line[$i] . '&lt;br&gt;';
          }
      }
  } else {
      //ファイルの中身が空だった時
      echo 'お知らせはありません';
  }
  ?&gt;
&lt;/html&gt;
</pre>
</div>
</div>

<div id="outline-container-org3fed61f" class="outline-2">
<h2 id="org3fed61f">ファイルの書き込み操作</h2>
<div class="outline-text-2" id="text-org3fed61f">
<pre class="example" id="org360e867">
&lt;?php
$fp = fopen("test.txt", "w");
if($fp) {
    fwrite($fp, "書き込みテスト1\n");
    fwrite($fp, "書き込みテスト2\n");
    fclose($fp);
    echo '書き込みました';
} else {
    //ファイルが上手く作成できない等のエラー時、ここへ来る
}
?&gt;
</pre>
</div>
</div>

<div id="outline-container-orge6cd1a5" class="outline-2">
<h2 id="orge6cd1a5">画像ファイルのアップロードプログラム</h2>
<div class="outline-text-2" id="text-orge6cd1a5">
<pre class="example" id="org8d23b96">
&lt;?php
$msg = null; //アップロード状況を表すメッセージ

// アップロード処理
if(isset($_FILE['image']) &amp;&amp; is_uploaded_file($_FILES['image']['tmp_name'])) {
    $old_name = $_FILES['image']['tmp_name'];
    $new_name = date("YmdHis"); //ベースとなるファイル名は日付
    $new_name .= mt_rand(); //ランダムな数字も追加
    switch(exif_imagetype($_FILES['image']['tmp_name'])) {
        case IMAGETYPE_JPEG:
            $new_name .= '.jpg';
            break;
        case IMAGETYPE_GIF:
            $new_name .= '.gif';
            break;
        case IMAGETYPE_PNG:
            $new_name .= '.png';
            break;
        default:
            header('Location: upload.php');
            exit();
    }
    if(move_uploaded_file($old_name, 'album/' . $new_name)) {
        $msg = 'アップロードしました';
    } else {
        $msg = 'アップロードできませんでした';
    }
}
?&gt;
</pre>
</div>
</div>
</div>
</body>
</html>
