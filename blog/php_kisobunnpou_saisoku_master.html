<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>PHP基礎文法最速マスター</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="css/style.css"/>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:e95b018ef3580986a04669f1b5879592219e2a7a&dn=public-domain.txt Public Domain
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="content">
<h1 class="title">PHP基礎文法最速マスター</h1>
<div id="outline-container-org689f301" class="outline-2">
<h2 id="org689f301"></h2>
<div class="outline-text-2" id="text-org689f301">
<hr />
</div>
<div id="outline-container-org6c894ab" class="outline-3">
<h3 id="org6c894ab"><a href="index.html">home</a></h3>
<div class="outline-text-3" id="text-org6c894ab">
<hr />
</div>
</div>
</div>

<div id="outline-container-orgc124dd1" class="outline-2">
<h2 id="orgc124dd1">基本文法</h2>
<div class="outline-text-2" id="text-orgc124dd1">
</div>
<div id="outline-container-org6bd049e" class="outline-3">
<h3 id="org6bd049e">コードブロック</h3>
<div class="outline-text-3" id="text-org6bd049e">
<p>
PHPコードは開始タグ <code>&lt;?php</code> から始まり、終了タグ <code>?&gt;</code> で終了します。<br />
ただし、終了タグは省略することが推奨されています。<br />
</p>
<pre class="example" id="org8e936f2">
&lt;?php
echo 'piyo';
</pre>
</div>
</div>
<div id="outline-container-org3b9cf62" class="outline-3">
<h3 id="org3b9cf62">文の終わり</h3>
<div class="outline-text-3" id="text-org3b9cf62">
<p>
PHPコードは、 ; で一文の終わりを示します。<br />
</p>
<pre class="example" id="org82941fe">
echo 'hoge';
</pre>
</div>
</div>
<div id="outline-container-orgf80a9f6" class="outline-3">
<h3 id="orgf80a9f6">コメント</h3>
<div class="outline-text-3" id="text-orgf80a9f6">
<pre class="example" id="org8ae268c">
// 一行コメント
# 一行コメント
/*
複数行コメント
複数行コメント
*/
</pre>
</div>
</div>
<div id="outline-container-orgf3f8098" class="outline-3">
<h3 id="orgf3f8098">変数の宣言</h3>
<div class="outline-text-3" id="text-orgf3f8098">
<p>
型はPHPが自動で決定するので、宣言する必要はありません。<br />
</p>
<pre class="example" id="org034219d">
$a = 'hoge'; // string
$b = 1; // integer
$c = true; // boolean
</pre>
</div>
</div>
</div>

<div id="outline-container-org9ed17c6" class="outline-2">
<h2 id="org9ed17c6">数値の表現</h2>
<div class="outline-text-2" id="text-org9ed17c6">
</div>
<div id="outline-container-org455222f" class="outline-3">
<h3 id="org455222f">四則演算</h3>
<div class="outline-text-3" id="text-org455222f">
<pre class="example" id="org248b123">
$i = 1 + 1; // 2
$i = 1 - 1; // 0
$i = 1 * 1; // 1
$i = 4 / 2; // 2
$i = 5 % 2; // 1
</pre>
</div>
</div>
<div id="outline-container-orgbc1700a" class="outline-3">
<h3 id="orgbc1700a">インクリメント・デクリメント</h3>
<div class="outline-text-3" id="text-orgbc1700a">
<pre class="example" id="orga5ceedf">
$i++;
$i--;
</pre>
</div>
</div>
<div id="outline-container-org4e7d86c" class="outline-3">
<h3 id="org4e7d86c">端数の切り上げ</h3>
<div class="outline-text-3" id="text-org4e7d86c">
<pre class="example" id="org38d16c3">
ceil(数値)
</pre>
</div>
</div>
</div>

<div id="outline-container-org3553477" class="outline-2">
<h2 id="org3553477">文字列操作</h2>
<div class="outline-text-2" id="text-org3553477">
<p>
文字列はシングルクォートかダブルクォートで囲みます。<br />
</p>
<pre class="example" id="org521acdb">
$s = 'hoge';
$s = "fuga";
</pre>
</div>
<div id="outline-container-org2d16a4e" class="outline-3">
<h3 id="org2d16a4e">特殊文字</h3>
<div class="outline-text-3" id="text-org2d16a4e">
<p>
ダブルクォートの中では特殊文字を利用できます。<br />
</p>
<pre class="example" id="orgee75e2e">
$s = "hoge\nfuga"; // \nは改行
$s = 'hoge\nfuga'; // \nは文字列
</pre>
</div>
</div>
<div id="outline-container-org5d2ec28" class="outline-3">
<h3 id="org5d2ec28">変数展開</h3>
<div class="outline-text-3" id="text-org5d2ec28">
<p>
ダブルクォートの中では変数展開ができます。<br />
</p>
<pre class="example" id="org4340119">
$x = hoge;
$string1 = "$x fuga";
$string2 = "{$x} fuga";
</pre>
</div>
</div>
<div id="outline-container-org64d750b" class="outline-3">
<h3 id="org64d750b">結合</h3>
<div class="outline-text-3" id="text-org64d750b">
<pre class="example" id="org5aa31e9">
$string1 = 'hoge';
$string2 = 'fuga';
$s = $string1 . $string2; // hogefuga
</pre>
</div>
</div>
</div>

<div id="outline-container-org602c518" class="outline-2">
<h2 id="org602c518">配列</h2>
<div class="outline-text-2" id="text-org602c518">
</div>
<div id="outline-container-orge051289" class="outline-3">
<h3 id="orge051289">初期化</h3>
<div class="outline-text-3" id="text-orge051289">
<pre class="example" id="org7b0a1b0">
// 2通り
$array = [];
$array = array();
</pre>
</div>
</div>
<div id="outline-container-orgcc405d5" class="outline-3">
<h3 id="orgcc405d5">リスト</h3>
<div class="outline-text-3" id="text-orgcc405d5">
<p>
リストは、キーが数値の連想配列として表現されます。<br />
</p>
<pre class="example" id="orgc4e1600">
$array = ['apple', 'melon', 'banana'];
echo $array[0]; // apple
</pre>
<p>
配列の値を変数に入れることもできます。<br />
</p>
<pre class="example" id="org0b25416">
$array = ['apple', 'melon', 'banana'];
[$x, $y, $z] = $array; // $x = 'apple', $y = 'melon', $z = 'banana'
</pre>
</div>
</div>
<div id="outline-container-org297b612" class="outline-3">
<h3 id="org297b612">連想配列</h3>
<div class="outline-text-3" id="text-org297b612">
<pre class="example" id="org2d6c515">
$array = [
  'apple' =&gt; 'red',
  'melon' =&gt; 'green',
  'banana' =&gt; 'yellow',
];
echo $array['banana']; // yellow
</pre>
<p>
配列の最後の要素の後ろにカンマ,を置いてもいいです。<br />
最後の要素の後にカンマを置くかどうかについては、時々論争が起きます。<br />
カンマを置いていると、新しい要素の追加があった時に、カンマ忘れでエラーになりにくいですし、Git上での差分も少なくてすみます。<br />
</p>
</div>
</div>
<div id="outline-container-org160f229" class="outline-3">
<h3 id="org160f229">要素の追加</h3>
<div class="outline-text-3" id="text-org160f229">
<pre class="example" id="orgde2899b">
$array = ['apple', 'melon'];
$array[] = 'banana'; // $arrayは['apple', 'melon', 'banana']
</pre>
<p>
連想配列の追加はキーを指定します。<br />
</p>
<pre class="example" id="org1bc2518">
$array = ['apple' =&gt; 'red', 'melon' =&gt; 'green'];
$array['banana'] = 'yellow'; // $arrayは['apple' =&gt; 'red', 'melon' =&gt; 'green', 'banana' =&gt; 'yellow']
</pre>
</div>
</div>
<div id="outline-container-orgc989de0" class="outline-3">
<h3 id="orgc989de0">配列に含まれる要素数を調べる</h3>
<div class="outline-text-3" id="text-orgc989de0">
<pre class="example" id="orga70e646">
// 返り値は数字、連想配列にも使える
count(配列の変数名)
</pre>
</div>
</div>
<div id="outline-container-org60480b0" class="outline-3">
<h3 id="org60480b0">配列の分割</h3>
<div class="outline-text-3" id="text-org60480b0">
<pre class="example" id="orga0378ab">
// 返り値は配列
array_chunk(分割したい配列, 分割単位)
</pre>
</div>
</div>
</div>

<div id="outline-container-org1024f5f" class="outline-2">
<h2 id="org1024f5f">特殊な演算子</h2>
<div class="outline-text-2" id="text-org1024f5f">
</div>
<div id="outline-container-orgdd689a5" class="outline-3">
<h3 id="orgdd689a5">エルビス演算子</h3>
<div class="outline-text-3" id="text-orgdd689a5">
<p>
$xがtrueであれば、$hogeにxを代入。そうでなければ、$hogeにyを代入する。<br />
</p>
<pre class="example" id="org54a8eae">
$hoge = $x ?: $y;
</pre>
</div>
</div>
<div id="outline-container-orgd2c38da" class="outline-3">
<h3 id="orgd2c38da">Null合体演算子（PHP7.0〜）</h3>
<div class="outline-text-3" id="text-orgd2c38da">
<p>
Nullの判定をする演算子です。<br />
</p>
<pre class="example" id="orgfeda283">
$hoge = $x ?? $y;
</pre>
</div>
</div>
<div id="outline-container-org4c41c66" class="outline-3">
<h3 id="org4c41c66">宇宙船演算子（PHP7.0〜）</h3>
<div class="outline-text-3" id="text-org4c41c66">
<p>
左辺（a）と右辺（b）を比較し、aが大きい場合は 1、 aとb が等しい場合は 0、 bが大きい場合は -1 をそれぞれ返します。<br />
</p>
<pre class="example" id="org2b88fa6">
switch (1 &lt;=&gt; 2) {
    case 1:
      echo '左辺の方が大きいです。';
      break;
    case -1:
      echo '右辺の方が大きいです。';
      break;
    case 0:
      echo '両辺は等しいです。';
      break;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf177c81" class="outline-2">
<h2 id="orgf177c81">スーパーグローバル変数</h2>
<div class="outline-text-2" id="text-orgf177c81">
<p>
PHPの定義済み変数です。<br />
サーバーの設定値やフォームからポストされたデータなど外部から渡された値が格納されています。<br />
</p>
<pre class="example" id="org4f83d9b">
$GLOBALS
$_SERVER
$_GET
$_POST
$_FILES
$_COOKIE
$_SESSION
$_REQUEST
$_ENV
</pre>
</div>
</div>

<div id="outline-container-orgc810190" class="outline-2">
<h2 id="orgc810190">定数</h2>
<div class="outline-text-2" id="text-orgc810190">
<p>
定数には配列も定義できます。定数は慣習的に大文字で書くことになっています。<br />
</p>
<pre class="example" id="orge88fc1d">
define('ANIMALS', [
    'dog',
    'cat',
    'bird',
]);
echo ANIMALS[1]; // cat
</pre>
</div>
</div>

<div id="outline-container-org5f2abb7" class="outline-2">
<h2 id="org5f2abb7">制御文</h2>
<div class="outline-text-2" id="text-org5f2abb7">
</div>
<div id="outline-container-orgd869197" class="outline-3">
<h3 id="orgd869197">if文</h3>
<div class="outline-text-3" id="text-orgd869197">
<pre class="example" id="orge00c692">
if ( 条件 ) {
    式
}
</pre>
</div>
</div>
<div id="outline-container-org2fc4e10" class="outline-3">
<h3 id="org2fc4e10">if-else文</h3>
<div class="outline-text-3" id="text-org2fc4e10">
<pre class="example" id="orge6005d8">
if ( 条件 ) {
    式1
} else {
    式2
}
</pre>
</div>
</div>
<div id="outline-container-orgbbceb88" class="outline-3">
<h3 id="orgbbceb88">elseif文</h3>
<div class="outline-text-3" id="text-orgbbceb88">
<pre class="example" id="org9452e36">
if ( 条件1 ) {
    式1
} elseif ( 条件2 ) {
    式2
}
</pre>
</div>
</div>
<div id="outline-container-orgf642716" class="outline-3">
<h3 id="orgf642716">while文</h3>
<div class="outline-text-3" id="text-orgf642716">
<p>
条件がtrueの間、ループします。<br />
</p>
<pre class="example" id="orgfe6a9ed">
while ( 条件 ) {
    式
}
</pre>
</div>
</div>
<div id="outline-container-orga922d8a" class="outline-3">
<h3 id="orga922d8a">for文</h3>
<div class="outline-text-3" id="text-orga922d8a">
<pre class="example" id="org755f9f8">
for ($i = 0; $i &lt; 100; $i++) {
    式
}
</pre>
</div>
</div>
<div id="outline-container-orgaac1285" class="outline-3">
<h3 id="orgaac1285">foreach文</h3>
<div class="outline-text-3" id="text-orgaac1285">
<p>
配列が存在する分だけループするというような場合に便利。<br />
連想配列にも使える。<br />
</p>
<pre class="example" id="org22e6361">
// 配列の値だけ取り出す場合
foreach ($array（配列） as $value（ループ内変数名）) {
    式
}
// 配列のキーも取り出す場合
foreach ($array（配列） as $key（キーの変数名） =&gt; $value（ループ内変数名）) {
    式
}
</pre>
<p>
多次元配列の場合、複数の変数に値を渡すことができます。(PHP7.1〜)<br />
</p>
<pre class="example" id="org9f0caca">
$array = [
    ['hoge', 'hogehoge'],
    ['fuga', 'fugafuga'],
    ['piyo', 'piyopiyo'],
];
foreach ($array as [$single, $double]) {
    echo $single;
}
// hogefugapiyo
</pre>
</div>
</div>
<div id="outline-container-org6b6f5d0" class="outline-3">
<h3 id="org6b6f5d0">do&#x2026;while文</h3>
<div class="outline-text-3" id="text-org6b6f5d0">
<pre class="example" id="orga7a99b4">
do {
   処理内容
} while (条件式);
</pre>
</div>
</div>
<div id="outline-container-org65c07ad" class="outline-3">
<h3 id="org65c07ad">switch文</h3>
<div class="outline-text-3" id="text-org65c07ad">
<pre class="example" id="orgb9b1841">
switch (式) {
    case 条件:
         caseに当てはまる場合の処理内容
    break;
    default:
         どのcaseにも当てはまらない場合の処理内容
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcb6da2f" class="outline-2">
<h2 id="orgcb6da2f">例外処理</h2>
<div class="outline-text-2" id="text-orgcb6da2f">
<p>
例外を処理したい場合は、 <code>try-catch</code> 構文で処理します。<br />
</p>
<pre class="example" id="org0a59eb2">
try {
    （例外が発生しそうな）処理
} catch(Exception $e（受け取る例外の条件）) {
    処理
}
</pre>
</div>
</div>

<div id="outline-container-org565dbe8" class="outline-2">
<h2 id="org565dbe8">関数</h2>
<div class="outline-text-2" id="text-org565dbe8">
</div>
<div id="outline-container-org4374976" class="outline-3">
<h3 id="org4374976">定義</h3>
<div class="outline-text-3" id="text-org4374976">
<p>
<code>return</code> で返り値を返します。<br />
呼び出し時に引数が立ちない場合、 <code>ArgumentCountError</code> の例外が発生します。（PHP7.1〜）<br />
</p>
<pre class="example" id="org575d935">
function sum($x, $y) {
    return $x + $y;
}
$total = sum(1, 2); // $total = 3
</pre>
<p>
配列を使えば複数の値を返せます。<br />
</p>
<pre class="example" id="orgbb0c2f9">
function plus_minus($x, $y) {
    return [$x + $y, $x - $y];
}
[$add, $sub] = plus_minus(10, 3); // $add = 13, $sub = 7
</pre>
</div>
</div>
<div id="outline-container-orgc9ec148" class="outline-3">
<h3 id="orgc9ec148">型宣言</h3>
<div class="outline-text-3" id="text-orgc9ec148">
<p>
引数と返り値にも型が指定ができる。<br />
</p>
<pre class="example" id="org8d4b181">
function hoge(string $s, int $x): bool {
    return true;
}
</pre>
<p>
nullableな型も宣言できます。（PHP7.1〜）<br />
</p>
<pre class="example" id="org1f30eda">
function hoge(?string $s, ?int $x): ?bool {
    return null;
}
</pre>
<p>
返り値がない場合、voidを指定することもできます。（PHP7.1〜）<br />
</p>
<pre class="example" id="orga80acf9">
function hoge(string $s): void {
    $GLOBAL['hoge'] = $s;
}
</pre>
</div>
<div id="outline-container-org7319758" class="outline-4">
<h4 id="org7319758">宣言可能な型</h4>
<div class="outline-text-4" id="text-org7319758">
<pre class="example" id="org296b5bb">
string
int
bool
array
float
callable
クラス名 / インターフェイス名
iterable （PHP7.1〜）
void （PHP7.1〜）
object （PHP7.2〜）
</pre>
</div>
</div>
</div>
<div id="outline-container-org0fb1e56" class="outline-3">
<h3 id="org0fb1e56">無名関数</h3>
<div class="outline-text-3" id="text-org0fb1e56">
<p>
関数に名前をつけずに関数を定義することができます。<br />
</p>
<pre class="example" id="org3557a5a">
$bar = 'world';
$hoge = function($foo) use ($bar) {
    var_dump($foo . ': ' . $bar);
};
$hoge('hello'); // string(12) "hello: world"
</pre>
<p>
即時実行もできます。<br />
</p>
<pre class="example" id="org29f80a5">
(function($foo) use ($bar) {
    var_dump($foo . ': ' . $bar);
})('hello'); // string(12) "hello: world"
</pre>
</div>
</div>
</div>

<div id="outline-container-org9aec849" class="outline-2">
<h2 id="org9aec849">クラス</h2>
<div class="outline-text-2" id="text-org9aec849">
</div>
<div id="outline-container-orgbc49af9" class="outline-3">
<h3 id="orgbc49af9">定義</h3>
<div class="outline-text-3" id="text-orgbc49af9">
<p>
アクセス修飾子はpublic、protected、privateが使えます。<br />
</p>
<pre class="example" id="org4178a77">
class Human {
    public $age = 20;
    private $name = 'hoge';
    public function getName() {
        return $this-&gt;melon;
    }
}
$hoge = new Human();
echo $hoge-&gt;age; // 20
echo $hoge-&gt;getName(); // hoge
</pre>
</div>
</div>
<div id="outline-container-org6c1435a" class="outline-3">
<h3 id="org6c1435a">継承</h3>
<div class="outline-text-3" id="text-org6c1435a">
<pre class="example" id="orgd634fe3">
class Fuga extends Hoge {
}
</pre>
</div>
</div>
<div id="outline-container-org56da8e0" class="outline-3">
<h3 id="org56da8e0">無名クラス（PHP7.0〜）</h3>
<div class="outline-text-3" id="text-org56da8e0">
<pre class="example" id="org4c7c478">
$class = new class{
    public $msg;
    public function logging() {
        echo $this-&gt;msg;
    }
};
var_dump($class);
/*
object(class@anonymous)#1 (1) {
  ["msg"]=&gt;
  NULL
}
*/
</pre>
</div>
</div>
</div>

<div id="outline-container-org7f706a1" class="outline-2">
<h2 id="org7f706a1">ファイル操作</h2>
<div class="outline-text-2" id="text-org7f706a1">
<p>
Webアプリを外部に公開する場合は、ファイルの意図しない漏洩（URL指定でファイルに直接アクセスする等）を防ぐため、ドキュメントルートの外にファイルを置き、ファイルのURLを直接指定しても見えないようにすること。<br />
</p>
</div>
<div id="outline-container-org5f27a93" class="outline-3">
<h3 id="org5f27a93">ファイルの中身をすべて読み込む</h3>
<div class="outline-text-3" id="text-org5f27a93">
<pre class="example" id="org720c076">
// 返り値は文字列
file_get_contents(ファイル名);
</pre>
</div>
</div>
<div id="outline-container-orge1786b3" class="outline-3">
<h3 id="orge1786b3">改行コードを br タグに置き換える</h3>
<div class="outline-text-3" id="text-orge1786b3">
<pre class="example" id="orge72f3d4">
// &lt;br /&gt; になる、返り値は文字列
nl2br(文字列);
// &lt;br&gt; になる、返り値は文字列
nl2br(文字列, false);
</pre>
</div>
</div>
<div id="outline-container-org92d5233" class="outline-3">
<h3 id="org92d5233">ファイルを1行ずつ読み込む</h3>
<div class="outline-text-3" id="text-org92d5233">
<p>
ファイルを開く（fopen） -&gt; ファイルから1行読み込む（fgets） -&gt; ファイルを閉じる（fclose） の流れ<br />
</p>
</div>
<div id="outline-container-org33180f5" class="outline-4">
<h4 id="org33180f5">ファイルを開く</h4>
<div class="outline-text-4" id="text-org33180f5">
<pre class="example" id="org37aef9f">
// 返り値はファイルポインタ
fopen("ファイル名"、"モード");
</pre>
<ul class="org-ul">
<li><p>
モード一覧<br />
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">モード</th>
<th scope="col" class="org-left">意味</th>
<th scope="col" class="org-left">説明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">r</td>
<td class="org-left">読み込み専用</td>
<td class="org-left">読み込みだけできるモード</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">ファイルポインタ位置：ファイルの先頭</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">ファイルサイズ：開くだけなのでそのまま</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">ファイルがない場合：開けない（戻り値 false）</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">r+</td>
<td class="org-left">読み・書き</td>
<td class="org-left">読むことも書くこともできるモード</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">ファイルポインタ位置：ファイルの先頭</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">ファイルサイズ：そのまま</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">ファイルがない場合：開けない（戻り値 false）</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">w</td>
<td class="org-left">書き込み専用</td>
<td class="org-left">書き込みだけできるモード</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">ファイルポインタ位置：ファイルの先頭</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">ファイルサイズ：ゼロになる</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">ファイルがない場合：作成する</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">w+</td>
<td class="org-left">読み・書き</td>
<td class="org-left">読むことも書くこともできるモード</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">ファイルポインタ位置：ファイルの先頭</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">ファイルサイズ：ゼロになる</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">ファイルがない場合：作成する</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">a</td>
<td class="org-left">追記</td>
<td class="org-left">追記するモード</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">ファイルポインタ位置：ファイルの末尾</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">ファイルサイズ：そのまま</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">ファイルがない場合：作成する</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">a+</td>
<td class="org-left">読み・追記</td>
<td class="org-left">読むことも追記することもできるモード</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">ファイルポインタ位置：ファイルの末尾</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">ファイルサイズ：そのまま</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">ファイルがない場合：作成する</td>
</tr>
</tbody>
</table></li>
</ul>
</div>
</div>
<div id="outline-container-org9b4c12b" class="outline-4">
<h4 id="org9b4c12b">ファイルから1行読み込む</h4>
<div class="outline-text-4" id="text-org9b4c12b">
<pre class="example" id="org523953b">
// 返り値は取得した1行の文字列
fgets(ファイルポインタ);
</pre>
</div>
</div>
<div id="outline-container-org2f37977" class="outline-4">
<h4 id="org2f37977">ファイルを閉じる</h4>
<div class="outline-text-4" id="text-org2f37977">
<pre class="example" id="org7a35b95">
// 返り値は、正常に閉じたら true、失敗したら false
fclose(ファイルポインタ（fopen で開いたときの返り値）);
</pre>
</div>
</div>
<div id="outline-container-orgc3e9155" class="outline-4">
<h4 id="orgc3e9155">ファイルポインタがファイル終端に達したか調べる</h4>
<div class="outline-text-4" id="text-orgc3e9155">
<pre class="example" id="orga6a933b">
// 正しくファイルが開けていることが条件
feof(ファイルポインタ);
</pre>
</div>
</div>
<div id="outline-container-org141a616" class="outline-4">
<h4 id="org141a616">ファイルの中身を配列に格納する</h4>
<div class="outline-text-4" id="text-org141a616">
<pre class="example" id="org3a226ca">
// 返り値は配列
file(ファイル名);
</pre>

<p>
流れとしては以下のようになる<br />
<a href="php_example.html">ファイルの読み込み操作（PHP 例文）</a><br />
</p>
</div>
</div>
</div>

<div id="outline-container-orgdb384f7" class="outline-3">
<h3 id="orgdb384f7">ファイルへの書き込み</h3>
<div class="outline-text-3" id="text-orgdb384f7">
<p>
fopen -&gt; fwrite -&gt; fclose の流れ。<br />
</p>
</div>
<div id="outline-container-orgdb296a9" class="outline-4">
<h4 id="orgdb296a9">ファイルに書き込む</h4>
<div class="outline-text-4" id="text-orgdb296a9">
<pre class="example" id="orgbbd2a30">
fwrite(ファイルポインタ, 書き込み内容)
</pre>

<p>
流れとしては以下のようになる<br />
<a href="php_example.html">ファイルの書き込み操作（PHP 例文）</a><br />
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-orgdcaa7a7" class="outline-2">
<h2 id="orgdcaa7a7">フォーム</h2>
<div class="outline-text-2" id="text-orgdcaa7a7">
<p>
サーバと利用者の間で双方向にデータのやり取りを行う際、サーバに対してリクエストを送信する方法は2種類。<br />
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">GET</td>
<td class="org-left">URLの末尾にデータを付与して送信する方式。少量のデータ送信に向く。</td>
</tr>

<tr>
<td class="org-left">POST</td>
<td class="org-left">HTMLのフォームなどから送信する方式。大量のデータ送信に向く。</td>
</tr>
</tbody>
</table>
</div>
<div id="outline-container-orgb585512" class="outline-3">
<h3 id="orgb585512">GETメソッド</h3>
<div class="outline-text-3" id="text-orgb585512">
</div>
<div id="outline-container-org22d11d0" class="outline-4">
<h4 id="org22d11d0">GETメソッドでのリクエスト</h4>
<div class="outline-text-4" id="text-org22d11d0">
<p>
以下のように、URLの末尾に「?」をつけ、「パラメータ名=値」という形式でデータを付与する。<br />
</p>
<pre class="example" id="org5ed6302">
hoge.example.com/index.php（パラメータを受け取るプログラム）?page（パラメータ名）=2（値）
</pre>
<p>
プログラム内部では page という変数に 2 という値が入った状態となる。2ページ目を表示させる等といった処理をさせることができる。<br />
複数のパラメータを送信する場合は、URLの ? 以降に「パラメータ=値」の組を &amp; でつないで書く。<br />
GETメソッドには次のような特徴がある。<br />
</p>
<ul class="org-ul">
<li>URLには文字数制限があるため、大量のデータは送信できない<br /></li>
<li>URLにパラメータを含めるため、送ったデータを隠せない<br /></li>
</ul>
</div>
</div>
<div id="outline-container-orgd628778" class="outline-4">
<h4 id="orgd628778">GETメソッドの受け取り</h4>
<div class="outline-text-4" id="text-orgd628778">
<p>
GETメソッドのリクエスト（GETリクエスト）を PHP では以下のように受け取る。<br />
</p>
<pre class="example" id="org55d3f36">
&lt;?php
$page = $_GET['page'];
echo 'リクエストされたページは' . $page . 'です。';
?&gt;
</pre>
</div>
</div>
<div id="outline-container-org3c5d0af" class="outline-4">
<h4 id="org3c5d0af">スーパーグローバル変数</h4>
<div class="outline-text-4" id="text-org3c5d0af">
<p>
プログラムのどこからでもアクセスできる特別な変数。<br />
GETメソッドのスーパーグローバル変数は、内部では連想配列として展開される。<br />
パラメータ名は連想配列のキーであり、値は連想配列の値となる。<br />
したがって以下のような操作もできる。<br />
</p>
<pre class="example" id="org4068f23">
&lt;?php

foreach($_GET as $key =&gt; $value) {
    echo 'キー:' . $key . '&lt;br&gt;';
    echo '値:' . $value . '&lt;br&gt;&lt;br&gt;';
}
?&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-org7864e43" class="outline-3">
<h3 id="org7864e43">POSTメソッド</h3>
<div class="outline-text-3" id="text-org7864e43">
</div>
<div id="outline-container-orgf01a53c" class="outline-4">
<h4 id="orgf01a53c">POSTメソッドでのリクエスト</h4>
<div class="outline-text-4" id="text-orgf01a53c">
<p>
POSTメソッドには次のような特徴がある。<br />
</p>
<ul class="org-ul">
<li>HTMLフォームを使って送信する<br /></li>
<li>大容量データを送信するのに適している<br /></li>
</ul>
<p>
リクエストには以下のような（HTML）フォームを使う。<br />
</p>
<div class="org-src-container">
<pre class="src src-web">&lt;form action="送信先のURL（受信側プログラム）" method="post"&gt;
  &lt;!-- input（テキストボックス） --&gt;
  &lt;!-- 送信される値はテキストボックスに入力された値 --&gt;
  &lt;input type="text" name="変数名"/&gt;
  &lt;!-- input（ラジオボタン） --&gt;
  &lt;input type="radio" name="変数名" value="送信される値"/&gt;
  &lt;!-- input（送信ボタン） --&gt;
  &lt;!-- value の値はボタンの上に書かれる文字になり、ボタンが押されると form の action で指定された URL にデータを送信する --&gt;
  &lt;input type="submit" value="ラベル名"/&gt;
  &lt;!-- テキストエリア --&gt;
  &lt;textarea name="変数名"&gt;&lt;/textarea&gt;
  &lt;!-- select（プルダウンメニュー）  --&gt;
  &lt;select name="変数名"&gt;
    &lt;option value="値1"&gt;値1&lt;/option&gt;
    &lt;option value="値2"&gt;値2&lt;/option&gt;
  &lt;/select&gt;
&lt;/form&gt;

&lt;!-- multipart/form-data は文字列データでなく画像ファイルなどをアップロードするときに指定 --&gt;
&lt;!-- input で type が file を使うときは enctype を指定する --&gt;
&lt;form action="送信先プログラム" method="post" enctype="multipart/form-data"&gt;
  &lt;!-- アップロードするためのファイル選択用フォーム --&gt;
  &lt;input type="file" name="変数名"/&gt;
  &lt;input type="submit" value="アップロード"/&gt;
&lt;/form&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-org1aa6f78" class="outline-4">
<h4 id="org1aa6f78">POSTメソッドの受け取り</h4>
<div class="outline-text-4" id="text-org1aa6f78">
<p>
GETメソッド同様、スーパーグローバル変数で以下のように受け取る。<br />
</p>
<pre class="example" id="org6e48a39">
$_POST['送信フォーム側の変数名（name）']
</pre>
</div>
</div>
</div>
<div id="outline-container-orga6d7eee" class="outline-3">
<h3 id="orga6d7eee">改ざんの防止</h3>
<div class="outline-text-3" id="text-orga6d7eee">
<p>
例1. 性別受け取り部分<br />
</p>
<pre class="example" id="org175551f">
$gender = $_POST['gender'];
if($gender == "man") {
    $gender = "男性";
} else if($gender == "woman") {
    $gender = "女性";
} else {
    $gender = "不正な値です";
}
</pre>
<p>
例2. 評価受け取り部分<br />
</p>
<pre class="example" id="org21bf5d6">
$tmp_star = intval($_POST['star']);
$star = ''; //出力用
if($tmp_star &lt; 1 || $tmp_star &gt; 5) {
    $star = "不正な値です";
} else {
    for($i = 0; $i &lt; $tmp_star; $i++) {
        $star .= '★'; //送信された数字の数だけ★を追加
    }
    for($i; $i &lt; 5; $i++) {
        $star .= '☆'; //☆は、「5-送信された数字」分だけ追加
    }
}
</pre>
</div>
<div id="outline-container-org929ae69" class="outline-4">
<h4 id="org929ae69">変数の値を整数として返す</h4>
<div class="outline-text-4" id="text-org929ae69">
<pre class="example" id="org2735ded">
// 変数に代入された値を整数として返す。変数の値が整数でなかった場合 0 を返す。
intval(変数名)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd4ab37e" class="outline-3">
<h3 id="orgd4ab37e">アップロード</h3>
<div class="outline-text-3" id="text-orgd4ab37e">
<p>
アップロードされたファイルは一時的にテンポラリに保持される。<br />
このファイルをサーバーに保存するには、テンポラリから画像ディレクトリに移動させる必要がある。<br />
画像ファイルのアップロードプログラムの例は <a href="php_example.html">画像ファイルのアップロードプログラム（PHP 例文）</a><br />
</p>
</div>
<div id="outline-container-orgc0208ff" class="outline-4">
<h4 id="orgc0208ff">アップロードされたファイルか確認</h4>
<div class="outline-text-4" id="text-orgc0208ff">
<pre class="example" id="orgad2c42a">
is_uploaded_file(ファイル名)
</pre>
</div>
</div>
<div id="outline-container-orgf403ee4" class="outline-4">
<h4 id="orgf403ee4">グローバル変数</h4>
<div class="outline-text-4" id="text-orgf403ee4">
<p>
以下のようなグローバル変数で受け取る。<br />
アップロードしたファイルについての情報を持っている連想配列となっている。<br />
</p>
<pre class="example" id="orgd512801">
$_FILES['input タグの name 属性の値'][...]
</pre>
<p>
2つ目の [] に格納されている情報<br />
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">name</td>
<td class="org-left">アップロードしたオリジナルファイルのファイル名</td>
</tr>

<tr>
<td class="org-left">type</td>
<td class="org-left">ファイルの種類（MIMEタイプ）</td>
</tr>

<tr>
<td class="org-left">tmp＿name</td>
<td class="org-left">テンポラリにアップロードされたときに自動的につけられた仮の名前</td>
</tr>

<tr>
<td class="org-left">error</td>
<td class="org-left">エラーコード</td>
</tr>

<tr>
<td class="org-left">size</td>
<td class="org-left">ファイルサイズ</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-orgd6cc24c" class="outline-4">
<h4 id="orgd6cc24c">アップロードされたファイルの移動</h4>
<div class="outline-text-4" id="text-orgd6cc24c">
<pre class="example" id="org1664c78">
move_uploaded_file(移動元ファイル名, 移動先ファイル名)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org6fb37a7" class="outline-2">
<h2 id="org6fb37a7">画像の種類を調べる</h2>
<div class="outline-text-2" id="text-org6fb37a7">
<pre class="example" id="org55b48fd">
exif_imagetype(ファイル名)
</pre>
</div>
</div>

<div id="outline-container-orgcbbc476" class="outline-2">
<h2 id="orgcbbc476">日付文字列を返す</h2>
<div class="outline-text-2" id="text-orgcbbc476">
<pre class="example" id="orgb8b30c4">
date(フォーマット文字列)
</pre>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">フォーマット文字</th>
<th scope="col" class="org-left">説明</th>
<th scope="col" class="org-left">出力例</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Y</td>
<td class="org-left">4桁の年</td>
<td class="org-left">2014</td>
</tr>

<tr>
<td class="org-left">y</td>
<td class="org-left">2桁の年</td>
<td class="org-left">14</td>
</tr>

<tr>
<td class="org-left">M</td>
<td class="org-left">2桁の月で、先頭に0が付く</td>
<td class="org-left">01 や 12</td>
</tr>

<tr>
<td class="org-left">n</td>
<td class="org-left">先頭に 0 の付かない年</td>
<td class="org-left">1 や 12</td>
</tr>

<tr>
<td class="org-left">d</td>
<td class="org-left">2桁の日で、先頭に 0 が付く</td>
<td class="org-left">01 や 15</td>
</tr>

<tr>
<td class="org-left">j</td>
<td class="org-left">先頭に 0 の付かない日</td>
<td class="org-left">1 や 15</td>
</tr>

<tr>
<td class="org-left">H</td>
<td class="org-left">2桁の時（24時間単位）で、先頭に 0 が付く</td>
<td class="org-left">00 から 23</td>
</tr>

<tr>
<td class="org-left">i</td>
<td class="org-left">2桁の分で、先頭に 0 が付く</td>
<td class="org-left">00 から 59</td>
</tr>

<tr>
<td class="org-left">s</td>
<td class="org-left">2桁の秒で、先頭に 0 が付く</td>
<td class="org-left">00 から 59</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org05e90a6" class="outline-2">
<h2 id="org05e90a6">擬似乱数を返す</h2>
<div class="outline-text-2" id="text-org05e90a6">
<pre class="example" id="org87838b6">
mt_rand()
mt_rand(最小値, 最大値)
</pre>
</div>
</div>

<div id="outline-container-orgd3b1e50" class="outline-2">
<h2 id="orgd3b1e50">フォルダ操作</h2>
<div class="outline-text-2" id="text-orgd3b1e50">
</div>
<div id="outline-container-org1580230" class="outline-3">
<h3 id="org1580230">フォルダを開く</h3>
<div class="outline-text-3" id="text-org1580230">
<pre class="example" id="org7389587">
// 引数に指定されたフォルダを開き、ディレクトリハンドルを返す
opendir(フォルダ名)
</pre>
</div>
</div>
<div id="outline-container-orgf12da64" class="outline-3">
<h3 id="orgf12da64">フォルダ内のファイルを読み込む</h3>
<div class="outline-text-3" id="text-orgf12da64">
<pre class="example" id="org14b18dc">
// 引数のファイルハンドルからファイル名を読み込んで返り値とし、ファイル名が取得できなくなると false を返す。
readdir(ファイルハンドル)
</pre>
</div>
</div>
<div id="outline-container-org8070e3a" class="outline-3">
<h3 id="org8070e3a">フォルダを閉じる</h3>
<div class="outline-text-3" id="text-org8070e3a">
<pre class="example" id="orgb8a3371">
closedir(ファイルハンドル)
</pre>
</div>
</div>
</div>

<div id="outline-container-org2d9e3dd" class="outline-2">
<h2 id="org2d9e3dd">変数が定義されているか調べる</h2>
<div class="outline-text-2" id="text-org2d9e3dd">
<pre class="example" id="orgd673188">
// 定義されていれば true、定義されていなければ false を返す
isset(変数名)
</pre>
</div>
</div>

<div id="outline-container-org0c2e729" class="outline-2">
<h2 id="org0c2e729">変数が数値か判定する</h2>
<div class="outline-text-2" id="text-org0c2e729">
<pre class="example" id="org1401f6b">
// 引数が数値のときに true、そうでないときに false を返す
is_numeric(変数)
</pre>
</div>
</div>

<div id="outline-container-orga703fd7" class="outline-2">
<h2 id="orga703fd7">指定したURLへジャンプする</h2>
<div class="outline-text-2" id="text-orga703fd7">
<p>
HTTPヘッダを送信するための関数。<br />
ヘッダとは、送信するデータの容量などの、実データ（HTML）以外の情報のことである。<br />
</p>
<pre class="example" id="orgbd1ed55">
header('Location: 戻り先のURL');
</pre>
</div>
</div>

<div id="outline-container-orgd09036e" class="outline-2">
<h2 id="orgd09036e">正規表現</h2>
<div class="outline-text-2" id="text-orgd09036e">
<pre class="example" id="org1209b98">
// パターンに文字列が合っていれば true、そうでなければ false
preg_match("パターン", 文字列)
</pre>
</div>
</div>

<div id="outline-container-org1f2fbd5" class="outline-2">
<h2 id="org1f2fbd5">データベース操作</h2>
<div class="outline-text-2" id="text-org1f2fbd5">
</div>
<div id="outline-container-org11f9b0a" class="outline-3">
<h3 id="org11f9b0a">DSN</h3>
<div class="outline-text-3" id="text-org11f9b0a">
<p>
データベースに接続するときに必要。<br />
どのサーバーにあるどんなデータベースを使うのかを指定した文字列のこと。<br />
</p>
<pre class="example" id="org0ecc78b">
mysql:host=ホスト名;dbname=データベース名;charset=文字コード
</pre>
</div>
</div>
<div id="outline-container-orgf77f095" class="outline-3">
<h3 id="orgf77f095">PDO (PHP Data Objects)</h3>
<div class="outline-text-3" id="text-orgf77f095">
<p>
さまざまなデータベースを簡単に利用できるようにする、PHPの拡張機能。<br />
利用するには、new演算子を使ってPDOクラスのインスタンスを作成する必要がある。<br />
</p>
<pre class="example" id="org815d049">
// PDOクラスは、引数に DSN、ユーザ名、パスワードを必要とする。
$db = new PDO($dsn, $user, $password);
// プリペアドステートメントを使う際にセキュリティを高めるために指定。
$db-&gt;setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
</pre>
</div>
<div id="outline-container-orgd12a459" class="outline-4">
<h4 id="orgd12a459">プリペアドステートメント</h4>
<div class="outline-text-4" id="text-orgd12a459">
<p>
実行したいクエリのテンプレートのようなものである。SQL文を最初に用意しておいて、その後はクエリ内のパラメータの値だけを変更してクエリを実行できる。<br />
プリペアドステートメントを利用するためには、PDOオブジェクトを作成して、prepareメソッドを実行する。<br />
</p>
<pre class="example" id="org4d5db9b">
$PDOインスタンス-&gt;prepare("ステートメント文字列 ");

// 以下例
$stmt = $db-&gt;prepare("
    INSERT INTO contact (name, title, body, date, pass)
    VALUES (:name, :title, :body, now(), :pass)"
);
</pre>
<p>
「:名前」（プレースホルダ）の部分に、bindParam メソッドで後から値を埋め込む。<br />
文字列の場合は第3引数に PDO::PARAM<sub>STR</sub>、整数の場合は PDO::PARAM<sub>INT</sub> を指定する。<br />
値を埋め込む際、文字列を値としたい時、通常クオーテーションで文字列を囲む必要があるが、プリペアドステートメントを使う場合は自動的に付けてくれるため不要である。<br />
</p>
<pre class="example" id="orga320f7f">
$stmt-&gt;bindParam(':name', $name, PDO::PARAM_STR);
$stmt-&gt;bindParam(':title', $title, PDO::PARAM_STR);
$stmt-&gt;bindParam(':body', $body, PDO::PARAM_STR);
$stmt-&gt;bindParam(':pass', $pass, PDO::PARAM_STR);
</pre>
<p>
作成したプリペアドステートメントは、execute で実行する。<br />
</p>
<pre class="example" id="orgb7036f4">
$stmt-&gt;execute();
</pre>
<p>
この実行結果は $stmt に保存されると考える。<br />
</p>
</div>
</div>
<div id="outline-container-orgb929140" class="outline-4">
<h4 id="orgb929140">fetch メソッド</h4>
<div class="outline-text-4" id="text-orgb929140">
<pre class="example" id="org0a2e3a3">
$stmt-&gt;fetch()
</pre>
<p>
結果セットから1件分のレコードが、カラム名をキーとした連想配列として返ってくる。<br />
</p>
</div>
</div>
<div id="outline-container-orga995b72" class="outline-4">
<h4 id="orga995b72">fetchColumn メソッド</h4>
<div class="outline-text-4" id="text-orga995b72">
<pre class="example" id="orgdfb98de">
$stmt-&gt;fetchColumn()
</pre>
<p>
実行したクエリ（$stmt）からカラムを1つだけ取得する。<br />
先頭を0として何番目のカラムか数えて、引数として与える。引数なしだと最初のカラムの内容を取得する。<br />
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org6e3e7a9" class="outline-2">
<h2 id="org6e3e7a9">クッキー</h2>
<div class="outline-text-2" id="text-org6e3e7a9">
<p>
クッキーとは、サーバー上のデータをブラウザに保存することで情報を再利用する仕組みのことである。<br />
最初にデータをPOSTメソッドでサーバーに送信した際、ブラウザに対してサーバーからクッキーが送信される。これによりサーバーが持っているデータをブラウザが保存することができ、次に同じようにアクセスした際にブラウザが自身に保存されているクッキーの情報をサーバーに送ることで、情報を再利用することができる。<br />
以下はクッキーの注意点<br />
</p>
<ul class="org-ul">
<li>容量の大きい情報を入れないこと<br /></li>
<li>重要な情報を入れないこと<br /></li>
<li>内容が書き換えられると困る情報を入れないこと<br /></li>
</ul>
</div>
<div id="outline-container-org7efdbd9" class="outline-3">
<h3 id="org7efdbd9">クッキーの保存</h3>
<div class="outline-text-3" id="text-org7efdbd9">
<pre class="example" id="org6a167fd">
// 第1引数は必須項目、第2引数以降は省略可能
// 第3引数は省略すると自動的に「0」
setcookie(クッキーの名前, 保存する値, 有効期限のタイムスタンプ)
</pre>
</div>
</div>
<div id="outline-container-orgca79a5b" class="outline-3">
<h3 id="orgca79a5b">クッキーの読み込み</h3>
<div class="outline-text-3" id="text-orgca79a5b">
<p>
スーパーグローバル変数である「$<sub>COOKIE</sub>['クッキーの名前']」を利用する。<br />
連想配列になっており、キーはクッキーの名前になる。<br />
</p>
</div>
</div>
</div>

<div id="outline-container-org1f3ec1a" class="outline-2">
<h2 id="org1f3ec1a">セッション</h2>
<div class="outline-text-2" id="text-org1f3ec1a">
<p>
1セッション（サイトの閲覧開始から終了までの一連の流れ）の開始から終了までの情報維持を目的とする。<br />
色々なページに移動してもログイン情報や買い物カート等といった情報を維持できる。<br />
</p>
</div>
<div id="outline-container-org333fa00" class="outline-3">
<h3 id="org333fa00">セッションの仕組み</h3>
<div class="outline-text-3" id="text-org333fa00">
<p>
セッション機能を使ったWebサイトにアクセスすると、サーバーはセッションIDと呼ばれるユニークなIDを作成すると同時に、そのセッションIDをファイル名としたデータ保存用のセッションファイルというファイルを作成する。<br />
サーバーはセッションIDをブラウザ側のクッキーに保存させることで、特定ユーザーのブラウザとセッションファイルを紐付ける。<br />
ページ遷移する際はクッキーに保存されたセッションIDをサーバーに送信し、保持したいデータがあるときはセッションファイルにデータを書き込む。<br />
</p>
</div>
</div>
<div id="outline-container-org4873e14" class="outline-3">
<h3 id="org4873e14">ログイン機能</h3>
<div class="outline-text-3" id="text-org4873e14">
<p>
以下のような構成にする。<br />
</p>
<pre class="example" id="org3f097ed">
閲覧制限ページ.php
  ログインしている時：ページを表示
  していない時：login.php へ遷移

  ↑       ↓

login.php
  ログインしている時：閲覧制限ページ.php へ遷移
  していない時：ログインフォームを表示
</pre>
</div>
</div>
<div id="outline-container-org1388759" class="outline-3">
<h3 id="org1388759">セッションの開始</h3>
<div class="outline-text-3" id="text-org1388759">
<pre class="example" id="org0691d2c">
session_start();
</pre>
<p>
session<sub>start関数は</sub>、セッションの開始と、（セッションIDをもとに）すでに開始しているセッションの復帰に使う。<br />
セッションを利用したプログラムを書く場合には最初に必ず書くこと。<br />
クッキーのように名前付きのセッションを使用したい場合は別関数を使う必要がある。<br />
</p>
</div>
</div>
<div id="outline-container-orge407fb4" class="outline-3">
<h3 id="orge407fb4">セッションの読み込み</h3>
<div class="outline-text-3" id="text-orge407fb4">
<p>
$<sub>SESSION</sub> というスーパーグローバル変数を連想配列として参照することができる。<br />
</p>
</div>
</div>
<div id="outline-container-org13cef24" class="outline-3">
<h3 id="org13cef24">セッションの終了</h3>
<div class="outline-text-3" id="text-org13cef24">
<pre class="example" id="org493462e">
// unset は $_SESSION 変数にではなく、各変数に対して使うこと。
unset($_SESSION['id']);
// 全セッション変数を消すには以下のようにする
$_SESSION = array();
// セッションファイルから削除するには次の関数を使う
session_destroy();
</pre>
</div>
</div>
</div>

<div id="outline-container-org77e1697" class="outline-2">
<h2 id="org77e1697">ファイルの読み込み</h2>
<div class="outline-text-2" id="text-org77e1697">
<p>
include で読み込む。<br />
読み込んだファイルは、include を使った部分にポコッとハマるイメージ。<br />
</p>
<pre class="example" id="org626ca4f">
&lt;?php
  include 'includes/login.php';
</pre>
<p>
include の他に require があり、include はファイルが読み込めずにエラーになっても処理は続くが、require では致命的なエラーを発してプログラムが止まる。<br />
</p>
</div>
</div>

<div id="outline-container-orge73f70a" class="outline-2">
<h2 id="orge73f70a">セキュリティ</h2>
<div class="outline-text-2" id="text-orge73f70a">
<p>
基本的な心構えとして、「外部入力（GET, POST, 想定外の入力内容, クッキー）は敵」だと思って疑うこと。<br />
</p>
</div>

<div id="outline-container-org7d8ce34" class="outline-3">
<h3 id="org7d8ce34">クロスサイトスクリプティング（XSS）</h3>
<div class="outline-text-3" id="text-org7d8ce34">
</div>
<div id="outline-container-orge624640" class="outline-4">
<h4 id="orge624640">説明</h4>
<div class="outline-text-4" id="text-orge624640">
<p>
何かしらのサイトに記述された JavaScript のプログラムが、別のサイト、あるいはサイト間をまたがらずとも、実行されてしまうという脆弱性。<br />
</p>
</div>
</div>
<div id="outline-container-org6ea6f28" class="outline-4">
<h4 id="org6ea6f28">対策</h4>
<div class="outline-text-4" id="text-org6ea6f28">
<ul class="org-ul">
<li><p>
出力値のエスケープ（特別な意味のある文字列を別の無害な文字列に置き換える）が有効。<br />
</p>
<pre class="example" id="org79bb6a3">
htmlspecialchars(文字列, ENT_QUOTES, 'UTF-8')
</pre></li>
<li>外部入力がHTMLタグの属性値として使われるような場面では、外部入力をダブルクオーテーションで囲む。<br /></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org96e847b" class="outline-3">
<h3 id="org96e847b">SQLインジェクション</h3>
<div class="outline-text-3" id="text-org96e847b">
</div>
<div id="outline-container-org17e3102" class="outline-4">
<h4 id="org17e3102">説明</h4>
<div class="outline-text-4" id="text-org17e3102">
<p>
クエリを操作して意図しない情報を表示したり、削除したりする脆弱性。<br />
例えば「SELECT * FROM users WHERE name='$name'」の $name に 「鈴木' or '1' or '1"」と代入すると、「SELECT * FROM users WHERE name='鈴木' or '1' or '1'」となり、「'鈴木' or '1' or '1'」は TRUE であるため、すべてのレコードが選択されることとなる。<br />
</p>
</div>
</div>
<div id="outline-container-org0137b9e" class="outline-4">
<h4 id="org0137b9e">対策</h4>
<div class="outline-text-4" id="text-org0137b9e">
<p>
外部入力データ内のクオーテーションのエスケープを行う必要がある。<br />
一番の適切な方法はプリペアドステートメントを使うことである。<br />
PDO の持つプリペアドステートメント機能を使い、bindParam メソッドでデータを渡してあげることで、PDO が自動的に適切なエスケープ処理を行ってくれる。<br />
データベース関連の処理を行う場合には必須の操作である。<br />
</p>
</div>
</div>
</div>

<div id="outline-container-org038dd5b" class="outline-3">
<h3 id="org038dd5b">セッションハイジャック</h3>
<div class="outline-text-3" id="text-org038dd5b">
</div>
<div id="outline-container-org3af2ece" class="outline-4">
<h4 id="org3af2ece">説明</h4>
<div class="outline-text-4" id="text-org3af2ece">
<p>
セッションが他人によって乗っ取られ、本人になりすまされるという脆弱性である。<br />
セッションIDが連番で想像しやすかったり、短くて総当たり攻撃を受けやすかったり、盗聴器で抜き取られたり、攻撃者自身が作成したセッションIDを使わされたりすることで生じる。<br />
</p>
</div>
</div>
<div id="outline-container-org65a16a9" class="outline-4">
<h4 id="org65a16a9">対策</h4>
<div class="outline-text-4" id="text-org65a16a9">
<p>
ログインした直後にセッションIDを再生成するのが良い。<br />
</p>
<pre class="example" id="org60b3457">
session_regenerate_id(true);
</pre>
<p>
第1引数に true を指定すると、古いセッションファイルを削除する。<br />
なお、新しいセッションIDを発行するたびに、そのセッションIDをファイル名としたセッションファイルが作成されている。<br />
以下に login.php での例を示す。<br />
</p>
<pre class="example" id="org785da3f">
// ユーザが存在していたので、セッションにユーザIDをセット
$_SESSION['id'] = $row['id'];
// セッションID再生成
session_regenerate(true);
header('Location: index.php');
</pre>
<p>
ログイン前後でクッキーのセッションIDの値が変更されている。<br />
</p>
</div>
</div>
</div>

<div id="outline-container-org2235aec" class="outline-3">
<h3 id="org2235aec">クロスサイトリクエストフォージェリ（CSRF）</h3>
<div class="outline-text-3" id="text-org2235aec">
</div>
<div id="outline-container-orga18b6fe" class="outline-4">
<h4 id="orga18b6fe">説明</h4>
<div class="outline-text-4" id="text-orga18b6fe">
<p>
意図しないリクエストを強制的に送られてしまう脆弱性。<br />
本来サイト内の書き込みフォーム等から送られてこなければならないデータを、別の偽サイトから（データのみを）送るような攻撃手法である。<br />
</p>
</div>
</div>
<div id="outline-container-orga52c358" class="outline-4">
<h4 id="orga52c358">対策</h4>
<div class="outline-text-4" id="text-orga52c358">
<p>
「トークン」を使って、正しい所から送信されたデータであることを確かめるのが効果的。<br />
トークンは「証拠」という意味であり、特定のプログラムが作った証拠を示す短い文字列のことである。<br />
ページにアクセスした際にPHP（サーバー側）でトークンを作成し、セッション変数にトークンを保存して、hiddenフォームにもトークンを埋め込み、フォーム内容送信時にトークンも送信すると、サーバーが割り当てたトークンを持っているかどうかを確かめることができる。<br />
次のようにセッションIDをハッシュ化してトークンを作成できる。<br />
</p>
<pre class="example" id="orgef91333">
sha1(session_id()); // sha1方式のハッシュ
hash("sha256", session_id()); // sha256方式のハッシュ

// 現在のセッションIDを取得する関数
session_id()
</pre>
<p>
掲示板では、以下のようにしてCSRF対策を施せる。<br />
</p>
<ol class="org-ol">
<li><p>
bbs.php<br />
投稿フォームと削除用のフォームにhidden属性でトークンを埋め込む。<br />
</p>
<pre class="example" id="org4507b02">
&lt;body&gt;
  &lt;h1&gt;掲示板&lt;/h1&gt;
  &lt;p&gt;&lt;a href="index.php"&gt;トップページに戻る&lt;/a&gt;&lt;/p&gt;
  &lt;form action="write.php" method="post"&gt;
        （略）
    &lt;p&gt;&lt;input type="submit" value="書き込む"&gt;&lt;/p&gt;
    &lt;input type="hidden" name="token" value="&lt;?php echo sha1(session_id()); ?&gt;"&gt;
  &lt;/form&gt;
        （略）
      &lt;input type="submit" value="削除"&gt;
      &lt;input type="hidden" name="token "value="&lt;?php echo sha1(session_id()); ?&gt;"&gt;
    &lt;/form&gt;
</pre></li>
<li><p>
write.php<br />
送信されたトークンが正しいかどうかを確かめる。<br />
</p>
<pre class="example" id="org54cad27">
&lt;?php
include 'includes/login.php';
// データの受け取り
$name = $_POST['name'];
$title = $_POST['title'];
$body = $_POST['body'];
$pass = $_POST['pass'];
$token = $_POST['token'];

// 必須項目チェック
if ($name == '' || $body == '') {
    header('Location: bbs.php'); // bbs.php へ移動
    exit(); // 終了
}
if (!preg_match("/^[0-9]{4}$/", $pass)) {
    header('Location: bbs.php');
    exit();
}
// CSRF対策：トークンが正しいかどうか
if ($token != sha1(session_id())) {
    header('Location: bbs.php');
    exit()
}
</pre></li>
<li><p>
delete.php<br />
送信されたトークンが正しいかどうかを確かめる。<br />
</p>
<pre class="example" id="org72f60b0">
&lt;?php
include 'includes/login.php';
// データの受け取り
$id = intval($_POST['id']);
$pass = $_POST['pass'];
$token = $_POST['token'];

// 必須項目チェック
if ($id == '' || $pass == '') {
    header('Location: bbs.php');
    exit();
}
// CSRF対策：トークンが正しいかどうか
if ($token != sha1(session_id())) {
    header('Location: bbs.php');
    exit();
}
</pre></li>
</ol>
</div>
</div>
</div>
</div>

<div id="outline-container-org8aa764e" class="outline-2">
<h2 id="org8aa764e">文字コード</h2>
<div class="outline-text-2" id="text-org8aa764e">
<p>
WebページやPHPプログラムの作成から公開までの以下の5ステップの文字コードが揃っていないと、文字化けが起きる。<br />
</p>
<ul class="org-ul">
<li>PHPファイルを保存したときの文字コード<br /></li>
<li>PHPファイル内で指定した文字コード（meta要素のcharset属性）<br /></li>
<li>サーバ内の文字コード<br /></li>
<li>PHPインタプリタ内の文字コード<br /></li>
<li>表示するブラウザの文字コード<br /></li>
</ul>
</div>
</div>
</div>
</body>
</html>
